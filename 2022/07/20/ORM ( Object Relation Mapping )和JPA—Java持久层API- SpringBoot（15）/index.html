<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no"><title>ORM ( Object Relation Mapping )和JPA—Java持久层API- SpringBoot（15） | 清河水温龙井茶</title><meta name="author" content="李文若"><meta name="copyright" content="李文若"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="1.认识ORM  ORM ( Object Relation Mapping )是对象&#x2F;关系映射。它提供了概念性的、易于理解的数据模型，将数据库中的表和内存中的对象建立映射关系。它是随着面向对象的软件开发方法的发展而产生的，面向对象的开发方法依然是当前主流的开发方法。   对象和关系型数据是业务实体的两种表现形式。业务实体在内存中表现为对象，在数据库中表现为关系型数据。内存中的对象不会被"><meta property="og:type" content="article"><meta property="og:title" content="ORM ( Object Relation Mapping )和JPA—Java持久层API- SpringBoot（15）"><meta property="og:url" content="http://blog.buretuzi.online/2022/07/20/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89/index.html"><meta property="og:site_name" content="清河水温龙井茶"><meta property="og:description" content="1.认识ORM  ORM ( Object Relation Mapping )是对象&#x2F;关系映射。它提供了概念性的、易于理解的数据模型，将数据库中的表和内存中的对象建立映射关系。它是随着面向对象的软件开发方法的发展而产生的，面向对象的开发方法依然是当前主流的开发方法。   对象和关系型数据是业务实体的两种表现形式。业务实体在内存中表现为对象，在数据库中表现为关系型数据。内存中的对象不会被"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://image.buretuzi.online/blog/article/article-background/wallhaven-vqm7om.jpg"><meta property="article:published_time" content="2022-07-20T23:32:00.000Z"><meta property="article:modified_time" content="2025-05-13T09:14:30.667Z"><meta property="article:author" content="李文若"><meta property="article:tag" content="SpringBoot"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://image.buretuzi.online/blog/article/article-background/wallhaven-vqm7om.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://blog.buretuzi.online/2022/07/20/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89/"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="/pluginsSrc/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="/pluginsSrc/node-snackbar/dist/snackbar.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="/pluginsSrc/@fancyapps/ui/dist/fancybox.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"/search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:{defaultEncoding:2,translateDelay:0,msgToTraditionalChinese:"繁",msgToSimplifiedChinese:"簡"},noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0,highlightHeightLimit:!1},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:{chs_to_cht:"你已切换为繁体",cht_to_chs:"你已切换为简体",day_to_night:"你已切换为深色模式",night_to_day:"你已切换为浅色模式",bgLight:"#49b1f5",bgDark:"#1f1f1f",position:"top-right"},source:{justifiedGallery:{js:"/pluginsSrc/flickr-justified-gallery/dist/fjGallery.min.js",css:"/pluginsSrc/flickr-justified-gallery/dist/fjGallery.css"}},isPhotoFigcaption:!1,islazyload:!0,isAnchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={title:"ORM ( Object Relation Mapping )和JPA—Java持久层API- SpringBoot（15）",isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2025-05-13 09:14:30"}</script><noscript><style>#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){if(0===o)return;const n=864e5*o,a={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(a))},get:function(e){const t=localStorage.getItem(e);if(!t)return;const o=JSON.parse(t);if(!((new Date).getTime()>o.expiry))return o.value;localStorage.removeItem(e)}},e.getScript=e=>new Promise(((t,o)=>{const n=document.createElement("script");n.src=e,n.async=!0,n.onerror=o,n.onload=n.onreadystatechange=function(){const e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,t())},document.head.appendChild(n)})),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};const t=saveToLocal.get("theme");"dark"===t?activateDarkMode():"light"===t&&activateLightMode();const o=saveToLocal.get("aside-status");void 0!==o&&("hide"===o?document.documentElement.classList.add("hide-aside"):document.documentElement.classList.remove("hide-aside"));/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)&&document.documentElement.classList.add("apple")})(window)</script><link rel="stylesheet" href="/css/mouseMove.css"><link rel="stylesheet" href="/css/navigation.css"><link rel="stylesheet" href="/css/Scrollbar.css"><link rel="stylesheet" href="/css/custom.css"><link rel="stylesheet" href="/css/rightmenu.css"><link rel="stylesheet" href="/css/iconfont.css"><link rel="stylesheet" href="/css/Progressbar.css"><link rel="stylesheet" href="/css/footer.css"><link rel="stylesheet" href="/css/footerIcon/iconfont.css"><script rel="stylesheet" href="/css/footerIcon/iconfont.js"></script><link rel="stylesheet" href="/css/mouse.css"><link rel="stylesheet" href="/css/doublecolumn.css"><link rel="stylesheet" href="/css/font.css"><link rel="stylesheet" href="/css/player/aplayer.css"><link rel="stylesheet" href="/css/leftMenu.css"><link rel="stylesheet" href="/css/twikoo_beautify.css"><link rel="stylesheet" href="/css/about.css"><script defer charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script defer src="https://sdk.51.la/perf/js-sdk-perf.min.js" crossorigin="anonymous"></script><script defer src="/js/51La.js"></script><link rel="stylesheet" href="/css/categorybar.css"><link rel="stylesheet" href="https://image.buretuzi.online/blog/article/document/clock.min.css"><link rel="stylesheet" href="https://image.buretuzi.online/blog/article/document/runtime.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="/css/swiper/swiper.min.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="/css/swiper/swiperstyle.css" media="print" onload='this.media="all"'><meta name="generator" content="Hexo 6.3.0"></head><body><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><div class="loading-img"></div><div class="loading-image-dot"></div></div></div><script>const preloader={endLoading:()=>{document.body.style.overflow="auto",document.getElementById("loading-box").classList.add("loaded")},initLoading:()=>{document.body.style.overflow="",document.getElementById("loading-box").classList.remove("loaded")}};window.addEventListener("load",(()=>{preloader.endLoading()})),document.addEventListener("pjax:send",(()=>{preloader.initLoading()})),document.addEventListener("pjax:complete",(()=>{preloader.endLoading()}))</script><link rel="stylesheet" href="/css/Progressbar.css"><script src="/pluginsSrc/pace-js/pace.min.js"></script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/head.jpg" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">48</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i> <span>归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i> <span>日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i> <span>菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fa fa-sitemap"></i> <span>关于</span></a></li><li><a class="site-page child" href="/myself/"><i class="fa-fw fa fa-id-card"></i> <span>关于我</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://github.com/luaby"><i class="fa-fw fa fa-heart"></i> <span>butterfly</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><div class="back-home-button" tabindex="-1"><i class="back-home-button-icon fas fa-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" href="https://www.cnblogs.com/liwenruo/" title="前往博客主页" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src="data:image/png;base64,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"><span class="back-menu-item-text">博客</span></a><a class="back-menu-item" href="http://buretuzi.online" rel="external nofollow" title="前往云盘主页" target="_blank" one-link-mark="yes"><img class="back-menu-item-icon" src="data:image/png;base64,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"><span class="back-menu-item-text">我的社区</span></a></div></div></div></div><a id="site-name" href="/"><div class="title">清河水温龙井茶</div><i class="fa-solid fa-house"></i></a></span><div class="mask-name-container"><center id="name-container"><a id="page-name" href="javascript:rmf.scrollToTop()">PAGE_NAME</a></center></div><div id="menus"><div class="nav-button" id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i> <span>搜索</span></a></div><div class="nav-button" id="search-button"><a class="site-page social-icon search" type="button" title="切换背景" onclick="toggleWinbox()"><i class="fas fa-image"></i></a></div><div class="nav-button" id="darkmode_navswitch"><a class="darkmode_switchbutton" type="button" title="浅色和深色模式转换" onclick="rmf.switchDarkMode()"><i class="fas fa-adjust"></i></a></div><div class="nav-button" id="nav-totop"><a class="totopbtn"><i class="fas fa-arrow-up"></i><span id="percent" onclick="btf.scrollToDest(0,500)">0</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i> <span>首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i> <span>归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i> <span>标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i> <span>分类</span></a></div><div class="menus_item"><a class="site-page" href="/comments/"><i class="fa-fw fas fa-envelope"></i> <span>留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i> <span>友链</span></a></div><div class="menus_item"><a class="site-page" href="/timeline/"><i class="fa-fw fa fa-bell"></i> <span>日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i> <span>菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/about/"><i class="fa-fw fa fa-sitemap"></i> <span>关于</span></a></li><li><a class="site-page child" href="/myself/"><i class="fa-fw fa fa-id-card"></i> <span>关于我</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://github.com/luaby"><i class="fa-fw fa fa-heart"></i> <span>butterfly</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">ORM ( Object Relation Mapping )和JPA—Java持久层API- SpringBoot（15）</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-07-20T23:32:00.000Z" title="发表于 2022-07-20 23:32:00">2022-07-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-05-13T09:14:30.667Z" title="更新于 2025-05-13 09:14:30">2025-05-13</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/java/">java</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">8.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>35分钟</span></span><span class="post-meta-separator">|</span><span data-flag-title="ORM ( Object Relation Mapping )和JPA—Java持久层API- SpringBoot（15）"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="twikoo_visitors"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div><article class="post-content" id="article-container"><h1 id="1-认识ORM"><a href="#1-认识ORM" class="headerlink" title="1.认识ORM"></a>1.认识ORM</h1><p>  ORM ( Object Relation Mapping )是对象&#x2F;关系映射。它提供了概念性的、易于理解的数据模型，将数据库中的表和内存中的对象建立映射关系。它是随着面向对象的软件开发方法的发展而产生的，面向对象的开发方法依然是当前主流的开发方法。</p><p>  对象和关系型数据是业务实体的两种表现形式。业务实体在内存中表现为对象，在数据库中表现为关系型数据。内存中的对象不会被永久保存，只有关系型数据库(或NoSQL数据库，或文件) 中的对象会被永久保存。</p><p>  对象&#x2F;关系映射(ORM)系统一般以中间件的形式存在，因为内存中的对象之间存在关联和继承关系，而在数据库中，关系型数据无法直接表达多对多的关联和继承关系。对象、数据库通过ORM 映射的关系如图所示。</p><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%881%EF%BC%89.png"></p><h1 id="2-JPA"><a href="#2-JPA" class="headerlink" title="2.JPA"></a>2.JPA</h1><h2 id="2-1认识-Spring-Data"><a href="#2-1认识-Spring-Data" class="headerlink" title="2.1认识 Spring Data"></a>2.1认识 Spring Data</h2><p>Spring Data是Spring的一个子项目，旨在统一和简化各类型数据的持久化存储方式，而不拘泥于是关系型数据库还是NoSQL数据库。无论是哪种持久化存储方式，数据访问对象(Data Access Objects, DAO)都会提供对对象的增加、删除、修改和查询的方法，以及排序和分页方法等。Spring Data 提供了基于这些层面的统一接口(如：CrudRepository、PagingAndSorting- Repository),以实现持久化的存储。Spring Data包含多个子模块，主要分为主模块和社区模块。</p><h3 id="（1）主要模块"><a href="#（1）主要模块" class="headerlink" title="（1）主要模块"></a>（1）主要模块</h3><ul><li>Spring Data Commons：提供共享的基础框架，适合各个子项目使用，支持跨数据库持久化。</li><li>Spring Data JDBC：提供了对 JDBC 的支持，其中封装了 JDBCTemplate</li><li>Spring Data JDBC Ext：提供了对JDBC的支持，并扩展了标准的JDBC,支持Oracle RAD、高级队列和高级数据类型。</li><li>Spring Data JPA：简化创建JPA数据访问层和跨存储的持久层功能。</li><li>Spring Data KeyValue：集成了Redis和Riak,提供多个常用场景下的简单封装，便于构建 key-value 模块。</li><li>Spring Data LDAP：集成了 Spring Data repository 对 Spring LDAP 的支持。</li><li>Spring Data MongoDB：集成了对数据库 MongoDB 支持。</li><li>Spring Data Redts：集成了对 Redis 的支持。</li><li>Spring Data REST：集成了对 RESTful 资源的支持。</li><li>Spring Data for Apache Cassandra :集成了对大规模、高可用数据源 Apache Cassandra 的支持。</li><li>Spring Data for Apace Geode:集成了对 Apache Geode 的支持。</li><li>Spring Data for Apache Solr：集成了对 Apache Solr 的支持</li><li>Spring Data for Pivotal GemFire：集成了对 Pivotal GemFire 的支持。</li></ul><h3 id="（2）社区模块"><a href="#（2）社区模块" class="headerlink" title="（2）社区模块"></a>（2）社区模块</h3><ul><li>Spring Data Aerospike：集成了对 Aerospike 的支持</li><li>Spring Data ArangoDB：集成了对 ArangoDB 的支持</li><li>Spring Data Couchbase：集成了对 Couchbase 的支持</li><li>Spring Data Azure Cosmos DB：集成了对 Azure Cosmos 的支持。</li><li>Spring Data Cloud Datastore：集成了对 Google Datastore 的支持。</li><li>Spring Data Cloud Spanner：集成了对 Google Spanner 的支持。</li><li>Spring Data DynamoDB：集成了对 DynamoDB 的支持。</li><li>Spring Data Elasticsearch：集成了对搜索引擎框架 Elasticsearch 的支持。</li><li>Spring Data Hazelcast：集成了对 Hazelcast 的支持。</li><li>Spring Data Jest：集成了对基于 Jest REST client 的 Elasticsearch 的支持。</li><li>Spring Data Neo4j：集成了对Neo4j数据库的支持。</li><li>Spring Data Vault：集成了对 Vault 的支持。</li></ul><h2 id="2-2认识JPA"><a href="#2-2认识JPA" class="headerlink" title="2.2认识JPA"></a>2.2认识JPA</h2><p>JPA (Java Persistence API )是Java的持久化API,用于对象的持久化。它是一个非常强大的ORM持久化的解决方案，免去了使用JDBCTemplate开发的编写脚本工作。JPA通过简单约定好接口方法的规则自动生成相应的JPQL语句，然后映射成POJO对象。</p><p>  JPA是一个规范化接口，封装了Hibernate的操作作为默认实现，让用户不通过任何配置即可完成数据库的操作。JPA、Spring Date和Hibernate的关系如图所示。</p><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%882%EF%BC%89.png"></p><p>  Hibernate 主要通过 hibernate-annotation、hibernate-entitymanager、hibernate-core 三个组件来操作数据。</p><ul><li>hibernate-annotation: 是Hibernate 支持 annotation 方式配置的基础，它包括标准的 JPA annotations、Hibernate 自身特殊功能的 annotation</li><li>hibernate-core：是Hibernate的核心实现，提供了 Hibernate所有的核心功能。</li><li>hibernate-entitymanager：实现了标准的 JPA,它是 hibernate-core 和 JPA 之间的适配器，它不直接提供ORM的功能，而是对hibernate-core 行封装，使得Hibernate符合JPA的规范。</li></ul><p>  可使用以下代码来创建实体类</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> id;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  对比JPA与JDBCTemplate创建实体的方式可以看出：JPA的实现方式简单明了，不需要重写映射（支持自定义映射），只需要设置好属性即可。id的自増由数据库自动管理，也可以由程序管理，其他的工作JPA自动处理好了。</p><h2 id="2-3使用JPA"><a href="#2-3使用JPA" class="headerlink" title="2.3使用JPA"></a>2.3使用JPA</h2><h3 id="（1）添加JPA和MySQL数据库的依赖"><a href="#（1）添加JPA和MySQL数据库的依赖" class="headerlink" title="（1）添加JPA和MySQL数据库的依赖"></a>（1）添加JPA和MySQL数据库的依赖</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-data-jpa<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="（2）配置数据库连接信息"><a href="#（2）配置数据库连接信息" class="headerlink" title="（2）配置数据库连接信息"></a>（2）配置数据库连接信息</h3><p>  Spring Boot项目使用MySQL等关系型数据库，需要配置连接信息，可以在 application.yml文件中进行配置。以下代码配置了与MySQL数据库的连接信息：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">jpa:</span></span><br><span class="line">    <span class="attr">hibernate:</span></span><br><span class="line">      <span class="attr">ddl-auto:</span> <span class="string">update</span></span><br><span class="line">    <span class="attr">show-sql:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">jooq:</span></span><br><span class="line">    <span class="attr">sql-dialect:</span> <span class="string">org.hibernate.dialect.Mysql5InnoDBDialect</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/springboot?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=UTC&amp;useSSL=true</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">123456</span></span><br></pre></td></tr></table></figure><p>代码解释如下。</p><ul><li>spring.datasource.username :要填写的数据库用户名。</li><li>spring.datasource.password :要填写的数据库密码。</li><li>spring.jpa.show-sql&#x3D; true:开发工具的控制台是否显示SQL语句，建议打开。</li><li>spring.jpa.properties.hibernate.hbm2ddl.auto : hibernate 的配置属性，其主要作用 是：自动创建、更新、验证数据库表结构。该参数的几种配置见下表</li></ul><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%883%EF%BC%89.png"></p><h2 id="2-4了解JPA注解和属性"><a href="#2-4了解JPA注解和属性" class="headerlink" title="2.4了解JPA注解和属性"></a>2.4了解JPA注解和属性</h2><h3 id="（1）JPA的常用注解"><a href="#（1）JPA的常用注解" class="headerlink" title="（1）JPA的常用注解"></a>（1）JPA的常用注解</h3><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%884%EF%BC%89.png"></p><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%885%EF%BC%89.png"></p><h3 id="（2）映射关系的注解"><a href="#（2）映射关系的注解" class="headerlink" title="（2）映射关系的注解"></a>（2）映射关系的注解</h3><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%886%EF%BC%89.png"></p><h3 id="（3）映射关系的属性"><a href="#（3）映射关系的属性" class="headerlink" title="（3）映射关系的属性"></a>（3）映射关系的属性</h3><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%887%EF%BC%89.png"></p><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%888%EF%BC%89.png"></p><p>在 Spring Data JPA 中，要控制 Session 的生命周期：否则会出现”could not initialize proxy</p><p>  [xxxx#18]-no Session”错误。可以在配置文件中配置以下代码来控制Session的生命周期：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">open-in-view:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">properties:</span></span><br><span class="line">  <span class="attr">hibernate:</span></span><br><span class="line">    <span class="attr">enable_lazy_load_no_trans:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h2 id="2-5-实例：用JPA构建实体数据表"><a href="#2-5-实例：用JPA构建实体数据表" class="headerlink" title="2.5 实例：用JPA构建实体数据表"></a>2.5 实例：用JPA构建实体数据表</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.NotEmpty;</span><br><span class="line"><span class="keyword">import</span> javax.validation.constraints.Size;</span><br><span class="line"><span class="keyword">import</span> java.awt.*;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"><span class="keyword">import</span> java.util.Arrays;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Article</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Description: IDENTITY代表由数据库控制，auto代表由Spring Boot应用程序统一控制（有多个表时，id 的自增值不一定从1开始）</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> id;</span><br><span class="line">    <span class="meta">@Column(nullable = false,unique = true)</span></span><br><span class="line">    <span class="meta">@NotEmpty(message = &quot;标题不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *	Description:枚举类型</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Column(columnDefinition = &quot;enum(&#x27;图&#x27;,&#x27;图文&#x27;,&#x27;文&#x27;)&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String type;<span class="comment">//类型</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *	Description： Boolean 类型默认false</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> Boolean available= Boolean.FALSE;</span><br><span class="line">    <span class="meta">@Size(min = 0,max = 20)</span></span><br><span class="line">    <span class="keyword">private</span> String keyword;</span><br><span class="line">    <span class="meta">@Size(max = 255)</span></span><br><span class="line">    <span class="keyword">private</span> String description;</span><br><span class="line">    <span class="meta">@Column(nullable = false)</span></span><br><span class="line">    <span class="keyword">private</span> String body;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Description：创建虚拟字段</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Transient</span></span><br><span class="line">    <span class="keyword">private</span> List keywordlists;</span><br><span class="line">    <span class="keyword">public</span> List <span class="title function_">getKeywordlists</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (List) Arrays.asList(<span class="built_in">this</span>.keyword.trim().split(<span class="string">&quot;|&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setKeywordlists</span><span class="params">(List keywordlists)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.keywordlists = keywordlists;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="2-6认识JPA的接口"><a href="#2-6认识JPA的接口" class="headerlink" title="2.6认识JPA的接口"></a>2.6认识JPA的接口</h2><p>JPA提供了操作数据库的接口。在开发过程中继承和使用这些接口，可简化现有的持久化开发 工作。可以使Spring找到自定义接口，并生成代理类，后续可以把自定义接口注入Spring容器中进行管理。在自定义接口过程中，可以不写相关的SQL操作，由代理类自动生成。</p><h3 id="（1）JPA-接口-JpaRepository"><a href="#（1）JPA-接口-JpaRepository" class="headerlink" title="（1）JPA 接口 JpaRepository"></a>（1）JPA 接口 JpaRepository</h3><p>JpaRepository 继承自 PagingAndSortingRepository， 该接口提供了 JPA 的相关实用功能, 以及通过Example进行查询的功能。Example对象是JPA提供用来构造查询条件的对象。该接口的关键代码如下：</p><p>  public interface JpaRepository&lt;T, ID&gt; extends PagingAndSortingRepository&lt;T, ID&gt;, Query By ExampleExecutor<t>{}</t></p><p>  在上述代码中，T表示实体对象，ID表示主键。ID必须实现序列化。</p><p>  JpaRepository提供的方法见下表</p><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%889%EF%BC%89.png"></p><h3 id="（2）分页排序接口-PagingAndSortingRepository"><a href="#（2）分页排序接口-PagingAndSortingRepository" class="headerlink" title="（2）分页排序接口 PagingAndSortingRepository"></a>（2）分页排序接口 PagingAndSortingRepository</h3><p>  PagingAndSortingRepository继承自CrudRepository提供的分页和排序方法。其关键代码如下：</p><p><code>  @NoRepositoryBean</code></p><p><code>  public interface PagingAndSortingRepository&lt;T, ID&gt; extends CrudRepository&lt;T, ID&gt; &#123;</code></p><p><code>    lterable&lt;T&gt; findAll（Sort var1）;</code></p><p><code>    Page&lt;T&gt; findAII（Pageable var1）;</code></p><p><code>  &#125;</code></p><p>其方法有如下两种。</p><ul><li>lterable<t>findAII(Sort sort):排序功能。它按照”sort”制定的排序返回数据。</t></li><li>Page<t>findAII(Pageable pageable)：分页查询(含排序功能),</t></li></ul><h3 id="（3）数据操作接口-CrudRepository"><a href="#（3）数据操作接口-CrudRepository" class="headerlink" title="（3）数据操作接口 CrudRepository"></a>（3）数据操作接口 CrudRepository</h3><p>CrudRepository接口继承自Repository接口，并新增了增加、删除、修改和查询方法。</p><p>   CrudRepository提供的方法见下表</p><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%8810%EF%BC%89.png"></p><h3 id="（4）分页接口-Pageable-和-Page"><a href="#（4）分页接口-Pageable-和-Page" class="headerlink" title="（4）分页接口 Pageable 和 Page"></a>（4）分页接口 Pageable 和 Page</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@RequestMapping(&quot;/article&quot;)</span></span><br><span class="line"><span class="keyword">public</span> ModelAndView <span class="title function_">articleList</span><span class="params">(<span class="meta">@RequestParam(value = &quot;start&quot;,defaultValue = &quot;0&quot;)</span> Integer start,</span></span><br><span class="line"><span class="params">                                <span class="meta">@RequestParam(value = &quot;limit&quot;,defaultValue = &quot;10&quot;)</span> Integer limit)</span>&#123;</span><br><span class="line">    start = start &lt; <span class="number">0</span>?<span class="number">0</span>:start;</span><br><span class="line">    <span class="type">Sort</span> <span class="variable">sort</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Sort</span>(Sort.Direction.DESC,<span class="string">&quot;id&quot;</span>);</span><br><span class="line">    <span class="type">Pageable</span> <span class="variable">pageable</span> <span class="operator">=</span> PageRequest.of(start, limit, sort);</span><br><span class="line">    Page&lt;Article&gt; page = articleRepository.findAll(pageable);</span><br><span class="line">    <span class="type">ModelAndView</span> <span class="variable">mav</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;admin/article/list&quot;</span>);</span><br><span class="line">    mav.addObject(<span class="string">&quot;page&quot;</span>,page);</span><br><span class="line">    <span class="keyword">return</span> mav;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（5）排序类Sort"><a href="#（5）排序类Sort" class="headerlink" title="（5）排序类Sort"></a>（5）排序类Sort</h3><p>Sort类专门用来处理排序。最简单的排序就是先传入一个属性列，然后根据属性列的值进行排序。默认情况下是升序排列。它还可以根据提供的多个字段属性值进行排序。例如以下代码是通过 Sort.Order对象的List集合来创建Sort对象的：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">List&lt;Sort.Order&gt; orders = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Sort.Order&gt;();</span><br><span class="line">orders.add(<span class="keyword">new</span> <span class="title class_">Sort</span>.Order(Sort.Direction.DESC,<span class="string">&quot;id&quot;</span>));</span><br><span class="line">orders.add(<span class="keyword">new</span> <span class="title class_">Sort</span>.Order(Sort.Direction.ASC,<span class="string">&quot;view&quot;</span>));</span><br><span class="line"><span class="type">Pageable</span> <span class="variable">pageable</span> <span class="operator">=</span> PageRequest.of(start,limit,sort);</span><br><span class="line"><span class="type">Pageable</span> <span class="variable">pageable</span> <span class="operator">=</span> PageRequest.of(start,limit,Sort.by(orders));</span><br></pre></td></tr></table></figure><p>Sort排序的方法还有下面几种：</p><ul><li>直接创建Sort对象，适合对单一属性做排序。</li><li>通过Sort.Order对象创建Sort对象，适合对单一属性做排序。</li><li>通过属性的List集合创建Sort对象，适合对多个属性采取同一种排序方式的排序。</li><li>通过Sort.Order对象的List集合创建Sort对象，适合所有情况，比较容易设置排序方式。</li><li>忽略大小写排序。</li><li>使用JpaSort.unsafe进行排序。</li><li>使用聚合函数进行排序。</li></ul><h1 id="3-JPA的查询方式"><a href="#3-JPA的查询方式" class="headerlink" title="3.JPA的查询方式"></a>3.JPA的查询方式</h1><h2 id="3-1使用约定方法名"><a href="#3-1使用约定方法名" class="headerlink" title="3.1使用约定方法名"></a>3.1使用约定方法名</h2><p>约定方法名一定要根据命名规范来写，Spring Data会根据前缀、中间连接词（Or、And、Like、NotNull等类似SQL中的关键词）、内部拼接SQL代理生成方法的实现。约定方法名的方法见下表</p><p>  <img src="https://image.buretuzi.online/blog/article/springboot/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89%EF%BC%8811%EF%BC%89.png"></p><p>接口方法的命名规则也很简单，只要明白And、Or、Is、Equal、Greater、StartingWith等英文单词的含义，就可以写接口方法。具体用法如下：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.domain;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.repository.Repository;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">Repository</span>&lt;User,Long&gt; &#123;</span><br><span class="line">    List&lt;User&gt; <span class="title function_">findByEmailOrName</span><span class="params">(String email,String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上述代码表示，通过email或name来查找User对象。</p><p>约定方法名还可以支持以下几种语法：</p><ul><li>User findFirstByOrderByNameAsc()</li><li>Page<user>queryFirst100ByName(String name, Pageable pageable)</user></li><li>Slice<user>findTop100ByName(String name, Pageable pageable)</user></li><li>List<user>findFirst100ByName(String name, Sort sort)</user></li><li>List<user>findTop100ByName(String name, Pageable pageable)</user></li></ul><h2 id="3-2用JPQL进行查询"><a href="#3-2用JPQL进行查询" class="headerlink" title="3.2用JPQL进行查询"></a>3.2用JPQL进行查询</h2><p>  JPQL语言(Java Persistence Query Language)是一种和SQL非常类似的中间性和对象化查询语言，它最终会被编译成针对不同底层数据库的SQL语言，从而屏蔽不同数据库的差异。</p><p>  JPQL语言通过Query接口封装执行，Query接口封装了执行数据库查询的相关方法。调用 EntityManager的Query、NamedQuery及NativeQuery方法可以获得查询对象，进而可调用 Query接口的相关方法来执行查询操作。</p><p>  JPQL是面向对象进行查询的语言，可以通过自定义的JPQL完成UPDATE和DELETE操作。JPQL不支持使用INSERT，对于UPDATE或DELETE操作，必须使用注解@Modifying 进行修饰。</p><h3 id="（1）下面代码表示根据name值进行查找"><a href="#（1）下面代码表示根据name值进行查找" class="headerlink" title="（1）下面代码表示根据name值进行查找"></a>（1）下面代码表示根据name值进行查找</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;User,Long&gt; &#123;</span><br><span class="line">    <span class="meta">@Query(&quot;select u from User u where u.name = ?1&quot;)</span></span><br><span class="line">    User <span class="title function_">findByName</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（2）下面代码表示根据name值逬行模糊查找"><a href="#（2）下面代码表示根据name值逬行模糊查找" class="headerlink" title="（2）下面代码表示根据name值逬行模糊查找"></a>（2）下面代码表示根据name值逬行模糊查找</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;User,Long&gt; &#123;</span><br><span class="line">    <span class="meta">@Query(&quot;select u from User u where u.name like %?1&quot;)</span></span><br><span class="line">    List&lt;User&gt; <span class="title function_">findByName</span><span class="params">(String name)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="3-3用原生SQL进行查询"><a href="#3-3用原生SQL进行查询" class="headerlink" title="3.3用原生SQL进行查询"></a>3.3用原生SQL进行查询</h2><h3 id="（1）根据ID查询用户"><a href="#（1）根据ID查询用户" class="headerlink" title="（1）根据ID查询用户"></a>（1）根据ID查询用户</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="meta">@Query(value = &quot;select * from user u where u.id = :id&quot;, nativeQuery = true)</span></span><br><span class="line">Optional&lt;User&gt; <span class="title function_">findById</span><span class="params">(<span class="meta">@Param(&quot;id&quot;)</span> Long id)</span>;</span><br></pre></td></tr></table></figure><h3 id="（2）查询所有用户"><a href="#（2）查询所有用户" class="headerlink" title="（2）查询所有用户"></a>（2）查询所有用户</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Query(value = &quot;select * from user&quot;, nativeQuery = true)</span></span><br><span class="line">List&lt;User&gt; <span class="title function_">findAllNative</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure><h3 id="（3）根据email查询用户"><a href="#（3）根据email查询用户" class="headerlink" title="（3）根据email查询用户"></a>（3）根据email查询用户</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Query(value = &quot;select * from user where email = ?1&quot;, nativeQuery = true)</span></span><br><span class="line">User <span class="title function_">findByEmail</span><span class="params">(String email)</span>;</span><br></pre></td></tr></table></figure><h3 id="（4）根据name查询用户，并返回分页对象Page"><a href="#（4）根据name查询用户，并返回分页对象Page" class="headerlink" title="（4）根据name查询用户，并返回分页对象Page"></a>（4）根据name查询用户，并返回分页对象Page</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Query(value = &quot;select * from user where name = ?1&quot;,</span></span><br><span class="line"><span class="meta">    countQuery = &quot;select count(*) from user where name = ?1&quot;,</span></span><br><span class="line"><span class="meta">    nativeQuery = true)</span></span><br><span class="line">Page&lt;User&gt; <span class="title function_">findByName</span><span class="params">(String name, Pageable pageable)</span>;</span><br></pre></td></tr></table></figure><h3 id="（5）根据名字来修改email的值"><a href="#（5）根据名字来修改email的值" class="headerlink" title="（5）根据名字来修改email的值"></a>（5）根据名字来修改email的值</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Modifying</span></span><br><span class="line"><span class="meta">@Query(&quot;update user set email = :email where name = :name&quot;)</span></span><br><span class="line">Void <span class="title function_">updateUserEmaliByName</span><span class="params">(<span class="meta">@Param(&quot;name&quot;)</span> String name,<span class="meta">@Param(&quot;email&quot;)</span> String email)</span>;</span><br></pre></td></tr></table></figure><h2 id="3-4-用-Specifications-进行查询"><a href="#3-4-用-Specifications-进行查询" class="headerlink" title="3.4 用 Specifications 进行查询"></a>3.4 用 Specifications 进行查询</h2><p>如果要使 Repository 支持 Specification 查询，则需要在 Repository 中继承 JpaSpecification- Executor接口，具体使用见如下代码：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.executor;</span><br><span class="line"><span class="keyword">import</span> com.itheima.dao.ArticleRepository;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Article;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.PageRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.domain.Specification;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.criteria.*;</span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">testJpaSpecificationExecutor</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ArticleRepository articleRepository;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testJpaSpecificationExecutor</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pageNo</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">pageSize</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">        <span class="type">PageRequest</span> <span class="variable">pageable</span> <span class="operator">=</span> PageRequest.of(pageNo,pageSize);</span><br><span class="line">        Specification&lt;Article&gt; specification = <span class="keyword">new</span> <span class="title class_">Specification</span>&lt;Article&gt;()&#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Predicate <span class="title function_">toPredicate</span><span class="params">(Root&lt;Article&gt; root, CriteriaQuery&lt;?&gt; criteriaQuery, CriteriaBuilder criteriaBuilder)</span> &#123;</span><br><span class="line">                <span class="type">Path</span> <span class="variable">path</span> <span class="operator">=</span> root.get(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">Predicate</span> <span class="variable">predicate1</span> <span class="operator">=</span> criteriaBuilder.gt(path,<span class="number">2</span>);</span><br><span class="line">                <span class="type">Predicate</span> <span class="variable">predicate2</span> <span class="operator">=</span> criteriaBuilder.equal(root.get(<span class="string">&quot;num&quot;</span>),<span class="number">42283</span>);</span><br><span class="line">                <span class="type">Predicate</span> <span class="variable">predicate</span> <span class="operator">=</span> criteriaBuilder.and(predicate1,predicate2);</span><br><span class="line">                <span class="keyword">return</span> predicate;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        Page&lt;Article&gt; page = articleRepository.findAll(specification,pageable);</span><br><span class="line">        System.out.println(<span class="string">&quot;总记录数：&quot;</span>+page.getTotalElements());</span><br><span class="line">        System.out.println(<span class="string">&quot;当前第：&quot;</span>+(page.getNumber()+<span class="number">1</span>)+<span class="string">&quot;页&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;总页数：&quot;</span>+page.getTotalPages());</span><br><span class="line">        System.out.println(<span class="string">&quot;当前页面的List：&quot;</span>+page.getContent());</span><br><span class="line">        System.out.println(<span class="string">&quot;当前页面的记录数：&quot;</span>+page.getNumberOfElements());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码解释如下。</p><ul><li>CriteriaQuery接口: specific的顶层查询对象，它包含查询的各个部分，比如，select、from、 where、group by、order by等。CriteriaQuery对象只对实体类型或嵌入式类型的Criteria 查询起作用。</li><li>root：代表查询的实体类是Criteria查询的根对象，Criteria查询的根定义了实体类型，能为将来的导航获得想要的结果。它与SQL查询中的From子句类似。Root实例是类型化的, 且规定了 From子句中能够出现的类型。查询根实例通过传入一个实体类型给 AbstractQuery.from 方法获得。</li><li>query：可以从中得到Root对象，即告知JPA Criteria查询要查询哪一个实体类。还可以添加查询条件，并结合EntityManager对象得到最终查询的TypedQuery对象。</li><li>CriteriaBuilder对象：用于创建Criteria相关对象的工厂，可以从中获取到Predicate 对象。</li><li>Predicate类型：代表一个查询条件。</li></ul><p>运行上面的测试代码，在控制台会输出如下结果(确保数据库己经存在数据)：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Hibernate: select card0_.id as id1_0_, card0_.num as num2_0_ from card card0_ where card0_.id&gt;<span class="number">2</span> and card0_.num=<span class="number">422803</span> limit ?</span><br><span class="line">Hibernate: select <span class="title function_">count</span><span class="params">(cardO_.id)</span> as col_0_0_ from card card0_ where cardO_Jd&gt;<span class="number">2</span> and card0_.num=<span class="number">422803</span> </span><br><span class="line">总记录数:<span class="number">6</span></span><br><span class="line">当前第：<span class="number">1</span>页 总页数:<span class="number">2</span> 当前页面的 List: </span><br><span class="line">[Card(id=<span class="number">4</span>, num二<span class="number">422803</span>), Card(id=<span class="number">8</span>, num=<span class="number">422803</span>), Card(id=<span class="number">10</span>, num=<span class="number">422803</span>), Card(id=20t num=<span class="number">422803</span>), Card(id=<span class="number">23</span>, num=<span class="number">422803</span>)] </span><br><span class="line">当前页面的记录数:<span class="number">5</span></span><br></pre></td></tr></table></figure><h2 id="3-5-用-ExampleMatcher-进行查询"><a href="#3-5-用-ExampleMatcher-进行查询" class="headerlink" title="3.5 用 ExampleMatcher 进行查询"></a>3.5 用 ExampleMatcher 进行查询</h2><p>Spring Data可以通过Example对象来构造JPQL查询，具体用法见以下代码：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">user.setName(<span class="string">&quot;test&quot;</span>);</span><br><span class="line"><span class="type">ExampleMatcher</span> <span class="variable">matcher</span> <span class="operator">=</span> ExampleMatcher.matching()</span><br><span class="line">        .withIgnorePaths(<span class="string">&quot;name&quot;</span>)</span><br><span class="line">        .withIncludeNullValues()</span><br><span class="line">        .withStringMatcher(ExampleMatcher.StringMatcher.ENDING);</span><br><span class="line">Example&lt;User&gt; example = Example.of(user,matcher);</span><br><span class="line">List&lt;User&gt; list = userRepository.findAll(example);</span><br></pre></td></tr></table></figure><h2 id="3-6-用谓语QueryDSL进行查询"><a href="#3-6-用谓语QueryDSL进行查询" class="headerlink" title="3.6 用谓语QueryDSL进行查询"></a>3.6 用谓语QueryDSL进行查询</h2><p>QueryDSL也是基于各种ORM之上的一个通用查询框架,它与Spring Data JPA是同级别的。 使用QueryDSL的API可以写岀SQL语句(Java代码，非真正标准SQL),不需要懂SQL语句。 它能够构建类型安全的查询。这与JPA使用原生查询时有很大的不同，可以不必再对“Object[]‘ 进行操作。它还可以和JPA联合使用。</p><h1 id="4-用JPA开发文章管理模块"><a href="#4-用JPA开发文章管理模块" class="headerlink" title="4.用JPA开发文章管理模块"></a>4.用JPA开发文章管理模块</h1><h3 id="4-1实现文章实体"><a href="#4-1实现文章实体" class="headerlink" title="4.1实现文章实体"></a>4.1实现文章实体</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Article</span> <span class="keyword">extends</span> <span class="title class_">BaseEntity</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> id;</span><br><span class="line">    <span class="meta">@Column(nullable = false,unique = true)</span></span><br><span class="line">    <span class="meta">@NotEmpty(message = &quot;标题不能为空&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String title;</span><br><span class="line">    <span class="meta">@Column(nullable = false)</span></span><br><span class="line">    <span class="keyword">private</span> String body;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>代码解释如下：</p><ul><li><p>@Entity：声明它是个实体，然后加入了注解@Data, @Data是Lombok插件提供的注解， 以简化代码，自动生成Getter、Setter方法。文章的属性字段一般包含id、title、keyword、body，以及发布时间、更新时间、处理人。这里只简化设置文章id、关键词、标题和内容。</p></li><li><p>@GeneratedValue：将 id 作为主键。GenerationType 为“identity”，代表由数据库统 一控制id的自增。如果属性为“auto”,则是Spring Boot控制id的自增。使用identity 的好处是，通过数据库来管理表的主键的自增，不会影响到其他表</p></li><li><p>nullable &#x3D; false, unique &#x3D; true：建立唯一索引，避免重复。</p></li><li><p>@NotEmpty(message &#x3D;”标题不能为空”)：作为提示和验证消息。</p></li></ul><h2 id="4-2-实现数据持久层"><a href="#4-2-实现数据持久层" class="headerlink" title="4.2 实现数据持久层"></a>4.2 实现数据持久层</h2><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ArticleRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;Article,Long&gt;,</span><br><span class="line">        JpaSpecificationExecutor&lt;Article&gt;&#123;</span><br><span class="line">    Article <span class="title function_">findById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="4-3-通过创建服务接口和服务接口的实现类来完成业务逻辑功能"><a href="#4-3-通过创建服务接口和服务接口的实现类来完成业务逻辑功能" class="headerlink" title="4.3 通过创建服务接口和服务接口的实现类来完成业务逻辑功能"></a>4.3 通过创建服务接口和服务接口的实现类来完成业务逻辑功能</h2><h3 id="（1）创建服务接口，见以下代码"><a href="#（1）创建服务接口，见以下代码" class="headerlink" title="（1）创建服务接口，见以下代码"></a>（1）创建服务接口，见以下代码</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ArticleService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Article&gt; <span class="title function_">getArticleList</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> Article <span class="title function_">findArticleById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（2）编写服务接口的实现"><a href="#（2）编写服务接口的实现" class="headerlink" title="（2）编写服务接口的实现"></a>（2）编写服务接口的实现</h3><p>  在impl包下，新建article的impl实现service,并标注这个类为service服务类。</p><p>  通过implements声明使用ArticleService接口，并重写其方法，见以下代码：</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArticleServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">ArticleService</span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ArticleRepository articleRepository;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Article&gt; <span class="title function_">getArticleList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> articleRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Article <span class="title function_">findArticleById</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> articleRepository.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（3）实现增加、删除、修改和查询的控制层API功能"><a href="#（3）实现增加、删除、修改和查询的控制层API功能" class="headerlink" title="（3）实现增加、删除、修改和查询的控制层API功能"></a>（3）实现增加、删除、修改和查询的控制层API功能</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.dao.ArticleRepository;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Article;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Page;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.PageRequest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Pageable;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.domain.Sort;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Controller;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.*;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.ModelAndView;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping(&quot;article&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArticleController</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> ArticleRepository articleRepository;</span><br><span class="line">    <span class="meta">@RequestMapping(&quot;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">articlelist</span><span class="params">(<span class="meta">@RequestParam(value = &quot;start&quot;,defaultValue = &quot;0&quot;)</span>Integer start,</span></span><br><span class="line"><span class="params">                                    <span class="meta">@RequestParam(value = &quot;limit&quot;,defaultValue = &quot;5&quot;)</span>Integer limit)</span> &#123;</span><br><span class="line">        start = start &lt; <span class="number">0</span> ? <span class="number">0</span> : start;</span><br><span class="line">        <span class="type">Sort</span> <span class="variable">sort</span> <span class="operator">=</span> Sort.by(Sort.Direction.DESC, <span class="string">&quot;id&quot;</span>);</span><br><span class="line">        <span class="type">Pageable</span> <span class="variable">pageable</span> <span class="operator">=</span> PageRequest.of(start, limit, sort);</span><br><span class="line">        Page&lt;Article&gt; page = articleRepository.findAll(pageable);</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mav</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;article/list&quot;</span>);</span><br><span class="line">        mav.addObject(<span class="string">&quot;page&quot;</span>, page);</span><br><span class="line">        <span class="keyword">return</span> mav;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">getArticle</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="type">Article</span> <span class="variable">article</span> <span class="operator">=</span> articleRepository.findById(id);</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mav</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;article/show&quot;</span>);</span><br><span class="line">        mav.addObject(<span class="string">&quot;article&quot;</span>, article);</span><br><span class="line">        <span class="keyword">return</span> mav;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/add&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">addArticle</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;article/add&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PostMapping(&quot;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">saveArticle</span><span class="params">(Article model)</span>&#123;</span><br><span class="line">        articleRepository.save(model);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:/article/&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@DeleteMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">deleteArticle</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">long</span> id)</span>&#123;</span><br><span class="line">        articleRepository.deleteById(id);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@GetMapping(&quot;/edit/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> ModelAndView <span class="title function_">editArticle</span><span class="params">(<span class="meta">@PathVariable(&quot;id&quot;)</span> <span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="type">Article</span> <span class="variable">model</span> <span class="operator">=</span> articleRepository.findById(id);</span><br><span class="line">        <span class="type">ModelAndView</span> <span class="variable">mav</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ModelAndView</span>(<span class="string">&quot;article/edit&quot;</span>);</span><br><span class="line">        mav.addObject(<span class="string">&quot;article&quot;</span>, model);</span><br><span class="line">        <span class="keyword">return</span> mav;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@PutMapping(&quot;/&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">editArticleSave</span><span class="params">(Article model,<span class="type">long</span> id)</span>&#123;</span><br><span class="line">        model.setId(id);</span><br><span class="line">        articleRepository.save(model);</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;redirect:&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="5-实现自动填充字段"><a href="#5-实现自动填充字段" class="headerlink" title="5.实现自动填充字段"></a>5.实现自动填充字段</h1><p>在操作实体类时，通常需要记录创建时间和更新时间。如果每个对象的新增或修改都用手工来操作，则会显得比较烦琐。这时可以使用Spring Data JPA的注解@EnableJpaAuditing来实现自动填充字段功能。具体步骤如下。</p><h3 id="（1）开启JPA的审计功能"><a href="#（1）开启JPA的审计功能" class="headerlink" title="（1）开启JPA的审计功能"></a>（1）开启JPA的审计功能</h3><p>通过在入口类中加上注解@EnableJpaAuditing,来开启JPA的Auditing功能</p><h3 id="（2）创建基类"><a href="#（2）创建基类" class="headerlink" title="（2）创建基类"></a>（2）创建基类</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@MappedSuperclass</span></span><br><span class="line"><span class="meta">@EntityListeners(AuditingEntityListener.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class</span> <span class="title class_">BaseEntity</span> &#123;</span><br><span class="line">    <span class="meta">@CreatedDate</span></span><br><span class="line">    <span class="keyword">private</span> Long createTime;     <span class="comment">//createTime</span></span><br><span class="line">    <span class="meta">@LastModifiedDate</span></span><br><span class="line">    <span class="keyword">private</span> Long updateTime;     <span class="comment">//updateTime</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;create_by&quot;)</span></span><br><span class="line">    <span class="meta">@CreatedBy</span></span><br><span class="line">    <span class="keyword">private</span> Long createBy; <span class="comment">//createBy</span></span><br><span class="line">    <span class="meta">@Column(name = &quot;lastmodified_by&quot;)</span></span><br><span class="line">    <span class="meta">@LastModifiedBy</span></span><br><span class="line">    <span class="keyword">private</span> Long lastModifiedBy; <span class="comment">//lastModifiedBy</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（3）赋值给-CreatedBy-和-LastModifiedBy"><a href="#（3）赋值给-CreatedBy-和-LastModifiedBy" class="headerlink" title="（3）赋值给 CreatedBy 和 LastModifiedBy"></a>（3）赋值给 CreatedBy 和 LastModifiedBy</h3><p>  上述代码已经自动实现了创建和更新时间赋值，但是创建人和最后修改人并没有赋值，所以需要实现”AuditorAware”接口来返回需要插入的值</p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InjectAuditor</span> <span class="keyword">implements</span> <span class="title class_">AuditorAware</span>&lt;String&gt; &#123;</span><br><span class="line">    <span class="comment">//给 Bean 中的 @CreatedBy @LastModifiedBy 注入操作人</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Optional&lt;String&gt; <span class="title function_">getCurrentAuditor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">SecurityContext</span> <span class="variable">securityContext</span> <span class="operator">=</span> SecurityContextHolder.getContext();</span><br><span class="line">        <span class="keyword">if</span> (securityContext==<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (securityContext.getAuthentication()==<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">loginUserName</span> <span class="operator">=</span> securityContext.getAuthentication().getName();</span><br><span class="line">            Optional&lt;String&gt; name = Optional.ofNullable(loginUserName);</span><br><span class="line">            <span class="keyword">return</span> name;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  代码解释如下。</p><p>  @Configuration：表示此类是配置类。让Spring来加我该类配置。</p><p>  SecurityContextHolder:用于获取 SecurityContext,其存放了 Authentication 和特定于请求的安全信息。这里是判断用户是否登录。如果用户登录成功，则荻取用户名，然后把用户名返回给操作人。</p><h3 id="（4）使用基类"><a href="#（4）使用基类" class="headerlink" title="（4）使用基类"></a>（4）使用基类</h3><p>  要在其他类中使用基类，通过在其他类中继承即可</p><h1 id="6-关系映射开发"><a href="#6-关系映射开发" class="headerlink" title="6.关系映射开发"></a>6.关系映射开发</h1><h2 id="6-1认识实体间关系映射"><a href="#6-1认识实体间关系映射" class="headerlink" title="6.1认识实体间关系映射"></a>6.1认识实体间关系映射</h2><p>    对象关系映射（object relational mapping ）是指通过将对象状态映射到数据库列’来开发和 维护对象和关系数据库之间的关系。它能够轻松处理（执行）各种数据库操作，如插入、更新、 删除等</p><h3 id="（1）映射方向"><a href="#（1）映射方向" class="headerlink" title="（1）映射方向"></a>（1）映射方向</h3><p>   ORM的映射方向是表与表的关联（join ）,可分为两种。</p><ul><li>单向关系：代表一个实体可以将属性引用到另一个实体。即只能从A表向B表进行联表查询。</li><li>双向关系：代表每个实体都有一个关系字段(属性)引用了其他实体。</li></ul><h3 id="（2）ORM映射类型"><a href="#（2）ORM映射类型" class="headerlink" title="（2）ORM映射类型"></a>（2）ORM映射类型</h3><ul><li>一对一 (@OneToOne)：实体的每个实例与另一个实体的单个实例相关联。</li><li>一对多(@OneToMany): 一个实体的实例可以与另一个实体的多个实例相关联。</li><li>多对一(@ManyToOne): 一个实体的多个实例可以与另一个实体的单个实例相关联。</li><li>多对多(@ManyToMany)：—个实体的多个实例可能与另一个实体的多个实例有关。在 这个映射中，任何一方都可以成为所有者方。</li></ul><h2 id="实例：实现一对一映射"><a href="#实例：实现一对一映射" class="headerlink" title="实例：实现一对一映射"></a>实例：实现一对一映射</h2><p>  “一对一”映射首先要确定实体间的关系，并考虑表结构，还要考虑实体关系的方向性。</p><p>   若为双向关联，则在保存实体关系的实体中要配合注解@JoinColumn。在没有保存实体关系 的实体中，要用mappedBy属性明确所关联的实体。</p><h3 id="（1）编写实体"><a href="#（1）编写实体" class="headerlink" title="（1）编写实体"></a>（1）编写实体</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Table(name = &quot;stdu&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Column(columnDefinition = &quot;enum(&#x27;male&#x27;,&#x27;female&#x27;)&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="meta">@OneToOne(cascade = CascadeType.ALL)</span></span><br><span class="line">    <span class="meta">@JoinColumn(name = &quot;card_id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> Card card;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Table(name = &quot;card&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Card</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">long</span> id;</span><br><span class="line">    <span class="keyword">private</span> Integer num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（2）编写-Repository-层"><a href="#（2）编写-Repository-层" class="headerlink" title="（2）编写 Repository 层"></a>（2）编写 Repository 层</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Card;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CardRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;Card,Long&gt;&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    Optional&lt;Card&gt; <span class="title function_">findById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;Student,Long&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    Optional&lt;Student&gt; <span class="title function_">findById</span><span class="params">(Long id)</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（3）编写Service层"><a href="#（3）编写Service层" class="headerlink" title="（3）编写Service层"></a>（3）编写Service层</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Card;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CardService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Card&gt; <span class="title function_">getCardList</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> Optional&lt;Card&gt; <span class="title function_">findCardById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Student;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentList</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> Optional&lt;Student&gt; <span class="title function_">findStudentById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（4）编写Service实现"><a href="#（4）编写Service实现" class="headerlink" title="（4）编写Service实现"></a>（4）编写Service实现</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service.Impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Card;</span><br><span class="line"><span class="keyword">import</span> com.itheima.repository.CardRepository;</span><br><span class="line"><span class="keyword">import</span> com.itheima.service.CardService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CardServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">CardService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CardRepository cardRepository;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Card&gt; <span class="title function_">getCardList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cardRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Optional&lt;Card&gt; <span class="title function_">findCardById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cardRepository.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service.Impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Student;</span><br><span class="line"><span class="keyword">import</span> com.itheima.repository.StudentRepository;</span><br><span class="line"><span class="keyword">import</span> com.itheima.service.StudentService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">StudentService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentRepository studentRepository;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Student&gt; <span class="title function_">getStudentList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Optional&lt;Student&gt; <span class="title function_">findStudentById</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> studentRepository.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（5）编写测试"><a href="#（5）编写测试" class="headerlink" title="（5）编写测试"></a>（5）编写测试</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Card;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Student;</span><br><span class="line"><span class="keyword">import</span> com.itheima.repository.CardRepository;</span><br><span class="line"><span class="keyword">import</span> com.itheima.repository.StudentRepository;</span><br><span class="line"><span class="keyword">import</span> org.aspectj.lang.annotation.AfterThrowing;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OneToOneTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentRepository studentRepository;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> CardRepository cardRepository;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testOneToOne</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        student1.setName(<span class="string">&quot;好噶就&quot;</span>);</span><br><span class="line">        student1.setSex(<span class="string">&quot;male&quot;</span>);</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        student2.setName(<span class="string">&quot;会发卡号&quot;</span>);</span><br><span class="line">        student2.setSex(<span class="string">&quot;female&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">Card</span> <span class="variable">card1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Card</span>();</span><br><span class="line">        card1.setNum(<span class="number">6565</span>);</span><br><span class="line">        student1.setCard(card1);</span><br><span class="line">        studentRepository.save(student1);</span><br><span class="line">        studentRepository.save(student2);</span><br><span class="line">        <span class="type">Card</span> <span class="variable">card2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Card</span>();</span><br><span class="line">        card2.setNum(<span class="number">7878</span>);</span><br><span class="line">        cardRepository.save(card2);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  无需建表、会自动建！运行代码，控制台输出如下：</p><p><code>  Hibernate: create table card (id bigint not null auto_increment, num integer, primary key (id)) engine=InnoDB</code><br><code>  Hibernate: create table stdu (id bigint not null auto_increment, name varchar(255), sex enum(&#39;male&#39;,&#39;female&#39;), card_id bigint, primary key (id)) engine=InnoDB</code><br><code>  Hibernate: alter table stdu add constraint FKgaf9vaxnpmq98oc2d8gskduk9 foreign key (card_id) references card (id)</code></p><p><code>  Hibernate: insert into card (num) values (?)</code><br><code>  Hibernate: insert into stdu (card_id, name, sex) values (?, ?, ?)</code><br><code>  Hibernate: insert into stdu (card_id, name, sex) values (?, ?, ?)</code><br><code>  Hibernate: insert into card (num) values (?)</code></p><p>  时于双向的“一对一”关系映射，发出端和接收端都要使用注解@OneToOne,同时定义一个接收端类型的字段属性和@OneToOne注解中的“mappedBy”属徃：这个在双向关系的接收端是必需的。在双向关系中，有一方为关系的发出端，另一方是关系的反端。即 “Inverse“ <strong><em>端</em></strong> (接收端)</p><h2 id="实例：实现一对多映射"><a href="#实例：实现一对多映射" class="headerlink" title="实例：实现一对多映射"></a>实例：实现一对多映射</h2><p>  单向关系的一对多注解@0neToMany,只用于关系的发出端(“一”的一方)。另外，需要关系的发出端定义一个集合类型的接收端的字段属性。在一对多关联关系映射中，默认是以中间表方式来映射这种关系的。中间表的名称为“用下画线连接关系的拥有端(发出端)和Inverse端(接收端）中间表两个字段分别为两张表的表名加 下画线”_“再加主键组成。当然，也可以改变这种默认的中间表的映射方式。在关系的拥有端，使用@JoinClolum注解定义外键来映射这个关系。</p><h3 id="（1）编写实体-1"><a href="#（1）编写实体-1" class="headerlink" title="（1）编写实体"></a>（1）编写实体</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">School</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@OneToMany()</span></span><br><span class="line">    <span class="meta">@JoinColumn(name = &quot;school_id&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> List&lt;Teacher&gt; teacherList;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ManyToOne</span></span><br><span class="line">    <span class="keyword">private</span> School school;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（2）编写-Repository-层-1"><a href="#（2）编写-Repository-层-1" class="headerlink" title="（2）编写 Repository 层"></a>（2）编写 Repository 层</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.repository;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.School;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SchoolReposity</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;School,Long&gt; &#123;</span><br><span class="line">    Optional&lt;School&gt; <span class="title function_">findById</span><span class="params">(Long id)</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.repository;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Student;</span><br><span class="line"><span class="keyword">import</span> org.springframework.data.jpa.repository.JpaRepository;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">StudentRepository</span> <span class="keyword">extends</span> <span class="title class_">JpaRepository</span>&lt;Student,Long&gt; &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    Optional&lt;Student&gt; <span class="title function_">findById</span><span class="params">(Long id)</span>;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（3）编写Service层-1"><a href="#（3）编写Service层-1" class="headerlink" title="（3）编写Service层"></a>（3）编写Service层</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.School;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SchoolService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;School&gt; <span class="title function_">getSchoolList</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> Optional&lt;School&gt; <span class="title function_">findSchoolById</span><span class="params">(Long id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Teacher;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">TeacherService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Teacher&gt; <span class="title function_">getTeacherList</span><span class="params">()</span>;</span><br><span class="line">    <span class="keyword">public</span> Optional&lt;Teacher&gt; <span class="title function_">findTeacherById</span><span class="params">(<span class="type">long</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（4）编写Service实现-1"><a href="#（4）编写Service实现-1" class="headerlink" title="（4）编写Service实现"></a>（4）编写Service实现</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service.Impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.School;</span><br><span class="line"><span class="keyword">import</span> com.itheima.repository.SchoolReposity;</span><br><span class="line"><span class="keyword">import</span> com.itheima.service.SchoolService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SchoolServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">SchoolService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SchoolReposity schoolReposity;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;School&gt; <span class="title function_">getSchoolList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> schoolReposity.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Optional&lt;School&gt; <span class="title function_">findSchoolById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> schoolReposity.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.service.Impl;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Teacher;</span><br><span class="line"><span class="keyword">import</span> com.itheima.repository.TeacherReposity;</span><br><span class="line"><span class="keyword">import</span> com.itheima.service.TeacherService;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Optional;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TeacherServiceImpl</span> <span class="keyword">implements</span> <span class="title class_">TeacherService</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TeacherReposity teacherReposity;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> List&lt;Teacher&gt; <span class="title function_">getTeacherList</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> teacherReposity.findAll();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Optional&lt;Teacher&gt; <span class="title function_">findTeacherById</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> teacherReposity.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="（5）编写测试-1"><a href="#（5）编写测试-1" class="headerlink" title="（5）编写测试"></a>（5）编写测试</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.School;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Teacher;</span><br><span class="line"><span class="keyword">import</span> com.itheima.repository.SchoolReposity;</span><br><span class="line"><span class="keyword">import</span> com.itheima.repository.TeacherReposity;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OneToManyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SchoolReposity schoolReposity;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TeacherReposity teacherReposity;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">School</span> <span class="variable">school1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">School</span>();</span><br><span class="line">        school1.setName(<span class="string">&quot;清华&quot;</span>);</span><br><span class="line">        schoolReposity.save(school1);</span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">teacher1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>();</span><br><span class="line">        teacher1.setName(<span class="string">&quot;张分月&quot;</span>);</span><br><span class="line">        teacher1.setSchool(school1);</span><br><span class="line">        teacherReposity.save(teacher1);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">find</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">School</span> <span class="variable">school1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">School</span>();</span><br><span class="line">        school1 = schoolReposity.findById(Long.valueOf(<span class="number">1</span>)).get();</span><br><span class="line">        List&lt;Teacher&gt; teachers = school1.getTeacherList();</span><br><span class="line">        <span class="keyword">for</span>(Teacher teacher : teachers)&#123;</span><br><span class="line">            System.out.println(teacher.getName());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteSchoolById</span><span class="params">()</span>&#123;</span><br><span class="line">        schoolReposity.deleteById(Long.valueOf(<span class="number">5</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deleteTeacherById</span><span class="params">()</span> &#123;</span><br><span class="line">        teacherReposity.deleteById(Long.valueOf(<span class="number">5</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  控制台打印结果：</p><p>  添加：</p><p>  Hibernate: create table school (id bigint not null auto_increment, name varchar(255), primary key (id)) engine&#x3D;InnoDB<br>  Hibernate: create table teacher (id bigint not null auto_increment, name varchar(255), school_id bigint, primary key (id)) engine&#x3D;InnoDB<br>  Hibernate: alter table teacher add constraint FKrg46bnmgbcccayv14naymqg3r foreign key (school_id) references school (id)</p><p>  Hibernate: insert into school (name) values (?)<br>  Hibernate: insert into teacher (name, school_id) values (?, ?)</p><p>  查找：</p><p>  Hibernate: select school0_.id as id1_2_0_, school0_.name as name2_2_0_ from school school0_ where school0_.id&#x3D;?<br>  Hibernate: select teacherlis0_.school_id as school_i3_4_0_, teacherlis0_.id as id1_4_0_, teacherlis0_.id as id1_4_1_, teacherlis0_.name as name2_4_1_, teacherlis0_.school_id as school_i3_4_1_ from teacher teacherlis0_ where teacherlis0_.school_id&#x3D;?<br>  Hibernate: select school0_.id as id1_2_0_, school0_.name as name2_2_0_ from school school0_ where school0_.id&#x3D;?<br>  张分月</p><p>  删除学校：</p><p>  Hibernate: select school0_.id as id1_2_0_, school0_.name as name2_2_0_ from school school0_ where school0_.id&#x3D;?<br>  Hibernate: update teacher set school_id&#x3D;null where school_id&#x3D;?<br>  Hibernate: delete from school where id&#x3D;?</p><p>  删除教师：</p><p>  Hibernate: select teacher0_.id as id1_4_0_, teacher0_.name as name2_4_0_, teacher0_.school_id as school_i3_4_0_, school1_.id as id1_2_1_, school1_.name as name2_2_1_ from teacher teacher0_ left outer join school school1_ on teacher0_.school_id&#x3D;school1_.id where teacher0_.id&#x3D;?<br>  Hibernate: delete from teacher where id&#x3D;?</p><p>  在双向一对多关系中，注解@OneToMany（mappedBy&#x3D;’发出端实体名称小写）用于关系的发出端（即“One”的一方），同时关系的发出端需要定义一个集合类型的接收篇的字段属性；注解@ManyToOne用于关系的接收端（即“Many”的一方），关系的接收端需定义一个发出端的字段属性。</p><h2 id="实例：实现多对多映射"><a href="#实例：实现多对多映射" class="headerlink" title="实例：实现多对多映射"></a>实例：实现多对多映射</h2><h3 id="（1）创建实体类"><a href="#（1）创建实体类" class="headerlink" title="（1）创建实体类"></a>（1）创建实体类</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Table(name = &quot;stdu&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Student</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@Column(columnDefinition = &quot;enum(&#x27;male&#x27;,&#x27;female&#x27;)&quot;)</span></span><br><span class="line">    <span class="keyword">private</span> String sex;</span><br><span class="line">    <span class="meta">@ManyToMany(fetch = FetchType.LAZY)</span></span><br><span class="line">    <span class="meta">@JoinTable(name = &quot;teacher_student&quot;,joinColumns = &#123;@JoinColumn(name = &quot;s_id&quot;)&#125;,</span></span><br><span class="line"><span class="meta">            inverseJoinColumns = &#123;@JoinColumn(name = &quot;t_id&quot;)&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Teacher&gt; teachers;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima.domain;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> javax.persistence.*;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@Entity</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Teacher</span> &#123;</span><br><span class="line">    <span class="meta">@Id</span></span><br><span class="line">    <span class="meta">@GeneratedValue(strategy = GenerationType.IDENTITY)</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="meta">@ManyToMany(fetch = FetchType.LAZY)</span></span><br><span class="line">    <span class="meta">@JoinTable(name = &quot;teacher_student&quot;,joinColumns = &#123;@JoinColumn(name = &quot;t_id&quot;)&#125;,</span></span><br><span class="line"><span class="meta">            inverseJoinColumns = &#123;@JoinColumn(name = &quot;s_id&quot;)&#125;)</span></span><br><span class="line">    <span class="keyword">private</span> Set&lt;Student&gt; students;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  在“多对多”关系中需要注意以下几点：</p><ul><li>关系两方都可以作为主控。</li><li>在 joinColumns 的@JoinColumn(name&#x3D;”t_id”)中, t_id 为 JoinTable 中的外键。由于 Student 和 Teacher 的主键都为 id,所以这里省略了 referencedColumnName&#x3D;”id”</li><li>在设计模型之间的级联关系时，要考虑好应该采用何种级联规则。</li><li>如果设置 cascade &#x3D; CascadeType.PERSIST,则在执行 save 时会调用 onPersist（）方 法。这个方法会递归调用外联类(Student或Teacher)的onPersist ()进行级联新增。 但因为值已经添加了，所以会报detached entity passed to persist错误，将级联操作取消 (去掉 “ cascade &#x3D; CascadeType.PERSIST”)即可</li></ul><h3 id="（2）创建测试"><a href="#（2）创建测试" class="headerlink" title="（2）创建测试"></a>（2）创建测试</h3><p>  由于Service和Repository层和上节中的一样，所以这里不再重复写代码，直接进入测试层的代码编写。如果不清楚怎么实现，请具体查看上节的源代码。创建以下测试代码  </p><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.itheima;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Student;</span><br><span class="line"><span class="keyword">import</span> com.itheima.domain.Teacher;</span><br><span class="line"><span class="keyword">import</span> com.itheima.repository.StudentRepository;</span><br><span class="line"><span class="keyword">import</span> com.itheima.repository.TeacherReposity;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> org.junit.runner.RunWith;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"><span class="keyword">import</span> org.springframework.test.context.junit4.SpringRunner;</span><br><span class="line"><span class="keyword">import</span> java.util.HashSet;</span><br><span class="line"><span class="keyword">import</span> java.util.Set;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="meta">@RunWith(SpringRunner.class)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ManyToManyTest</span> &#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> StudentRepository studentRepository;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> TeacherReposity teacherReposity;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">()</span>&#123;</span><br><span class="line">        Set&lt;Teacher&gt; teachers = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;Teacher&gt;();</span><br><span class="line">        Set&lt;Student&gt; students = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;Student&gt;();</span><br><span class="line">        <span class="type">Student</span> <span class="variable">student1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        student1.setName(<span class="string">&quot;张三&quot;</span>);</span><br><span class="line">        students.add(student1);</span><br><span class="line">        studentRepository.save(student1);</span><br><span class="line"></span><br><span class="line">        <span class="type">Student</span> <span class="variable">student2</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Student</span>();</span><br><span class="line">        student2.setName(<span class="string">&quot;李刚&quot;</span>);</span><br><span class="line">        students.add(student2);</span><br><span class="line">        studentRepository.save(student2);</span><br><span class="line"></span><br><span class="line">        <span class="type">Teacher</span> <span class="variable">teacher1</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Teacher</span>();</span><br><span class="line">        teacher1.setName(<span class="string">&quot;罗老师&quot;</span>);</span><br><span class="line">        teacher1.setStudents(students);</span><br><span class="line">        teachers.add(teacher1);</span><br><span class="line">        teacherReposity.save(teacher1);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>  控制台打印如下：</p><p>  Hibernate: create table teacher (id bigint not null auto_increment, name varchar(255), school_id bigint, primary key (id)) engine&#x3D;InnoDB<br>  Hibernate: create table teacher_student (t_id bigint not null, s_id bigint not null, primary key (s_id, t_id)) engine&#x3D;InnoDB<br>  Hibernate: alter table teacher add constraint FKrg46bnmgbcccayv14naymqg3r foreign key (school_id) references school (id)<br>  Hibernate: alter table teacher_student add constraint FK5p0ij15uyb5oqnk3me34qjofn foreign key (s_id) references stdu (id)<br>  Hibernate: alter table teacher_student add constraint FK92l319wp07ku83lxjk9bglv4u foreign key (t_id) references teacher (id)</p><p>  Hibernate: insert into stdu (name, sex) values (?, ?)<br>  Hibernate: insert into stdu (name, sex) values (?, ?)<br>  Hibernate: insert into teacher (name) values (?)<br>  Hibernate: insert into teacher_student (t_id, s_id) values (?, ?)<br>  Hibernate: insert into teacher_student (t_id, s_id) values (?, ?)</p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者:</span> <span class="post-copyright-info"><a href="http://blog.buretuzi.online">李文若</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接:</span> <span class="post-copyright-info"><a href="http://blog.buretuzi.online/2022/07/20/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89/">http://blog.buretuzi.online/2022/07/20/ORM%20(%20Object%20Relation%20Mapping%20)%E5%92%8CJPA%E2%80%94Java%E6%8C%81%E4%B9%85%E5%B1%82API-%20SpringBoot%EF%BC%8815%EF%BC%89/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明:</span> <span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://blog.buretuzi.online" target="_blank">清河水温龙井茶</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SpringBoot/">SpringBoot</a></div><div class="post_share"><div class="addtoany"><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_wechat"></a><a class="a2a_button_sina_weibo"></a><a class="a2a_button_facebook_messenger"></a><a class="a2a_button_email"></a><a class="a2a_button_copy_link"></a><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a></div></div><script async src="https://static.addtoany.com/menu/page.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/07/23/Mybatis%E4%B8%8E%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5-%20SpringBoot%EF%BC%8816%EF%BC%89/"><img class="prev-cover" src="https://image.buretuzi.online/blog/article/article-background/wallhaven-wy78vp.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Mybatis与实现分页- SpringBoot（16）</div></div></a></div><div class="next-post pull-right"><a href="/2022/07/20/JDBCTemplate-%20SpringBoot%EF%BC%8814%EF%BC%89/"><img class="next-cover" src="https://image.buretuzi.online/blog/article/article-background/wallhaven-zyxrkv.jpg" onerror='onerror=null,src="/img/404.jpg"' alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JDBCTemplate- SpringBoot（14）</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2022/07/12/HTTP%E4%B8%AD%E5%AA%92%E4%BD%93%E7%B1%BB%E5%9E%8B-SpringBoot%EF%BC%881%EF%BC%89/" title="https中媒体类型-SpringBoot（1）"><img class="cover" src="/img/1.webp" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-12</div><div class="title">https中媒体类型-SpringBoot（1）</div></div></a></div><div><a href="/2022/07/20/JDBCTemplate-%20SpringBoot%EF%BC%8814%EF%BC%89/" title="JDBCTemplate- SpringBoot（14）"><img class="cover" src="https://image.buretuzi.online/blog/article/article-background/wallhaven-zyxrkv.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-20</div><div class="title">JDBCTemplate- SpringBoot（14）</div></div></a></div><div><a href="/2022/08/10/JWT-%20SpringBoot%EF%BC%8819%EF%BC%89/" title="JWT- SpringBoot（19）"><img class="cover" src="https://image.buretuzi.online/blog/article/article-background/wallhaven-wyo75q.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-10</div><div class="title">JWT- SpringBoot（19）</div></div></a></div><div><a href="/2022/07/23/Mybatis%E4%B8%8E%E5%AE%9E%E7%8E%B0%E5%88%86%E9%A1%B5-%20SpringBoot%EF%BC%8816%EF%BC%89/" title="Mybatis与实现分页- SpringBoot（16）"><img class="cover" src="https://image.buretuzi.online/blog/article/article-background/wallhaven-wy78vp.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-23</div><div class="title">Mybatis与实现分页- SpringBoot（16）</div></div></a></div><div><a href="/2022/07/26/RESTful%E4%B8%8ESwagger%EF%BC%88%E6%8E%A5%E5%8F%A3%E6%9E%B6%E6%9E%84%E9%A3%8E%E6%A0%BC%EF%BC%89-%20SpringBoot%EF%BC%8817%EF%BC%89/" title="RESTful与Swagger（接口架构风格）- SpringBoot（17）"><img class="cover" src="https://image.buretuzi.online/blog/article/article-background/wallhaven-vqgqlp.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-26</div><div class="title">RESTful与Swagger（接口架构风格）- SpringBoot（17）</div></div></a></div><div><a href="/2022/07/28/Spring%20Security-%20SpringBoot%EF%BC%8818%EF%BC%89/" title="Spring Security- SpringBoot（18）"><img class="cover" src="https://image.buretuzi.online/blog/article/article-background/wallhaven-m3dqj8.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-07-28</div><div class="title">Spring Security- SpringBoot（18）</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i> <span>评论</span></div><div id="comment-switch"><span class="first-comment">Twikoo</span><span class="switch-btn"></span><span class="second-comment">Valine</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/head.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">李文若</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">48</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">6</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">4</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/luaby"><i class="fab fa-github"></i><span>My GitHub</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/luaby" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:liwenruo87@gmail.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">Doro喜欢吃 欧润吉</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E8%AE%A4%E8%AF%86ORM"><span class="toc-number">1.</span> <span class="toc-text">1.认识ORM</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-JPA"><span class="toc-number">2.</span> <span class="toc-text">2.JPA</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1%E8%AE%A4%E8%AF%86-Spring-Data"><span class="toc-number">2.1.</span> <span class="toc-text">2.1认识 Spring Data</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%B8%BB%E8%A6%81%E6%A8%A1%E5%9D%97"><span class="toc-number">2.1.1.</span> <span class="toc-text">（1）主要模块</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%A4%BE%E5%8C%BA%E6%A8%A1%E5%9D%97"><span class="toc-number">2.1.2.</span> <span class="toc-text">（2）社区模块</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2%E8%AE%A4%E8%AF%86JPA"><span class="toc-number">2.2.</span> <span class="toc-text">2.2认识JPA</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3%E4%BD%BF%E7%94%A8JPA"><span class="toc-number">2.3.</span> <span class="toc-text">2.3使用JPA</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%B7%BB%E5%8A%A0JPA%E5%92%8CMySQL%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BE%9D%E8%B5%96"><span class="toc-number">2.3.1.</span> <span class="toc-text">（1）添加JPA和MySQL数据库的依赖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E4%BF%A1%E6%81%AF"><span class="toc-number">2.3.2.</span> <span class="toc-text">（2）配置数据库连接信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4%E4%BA%86%E8%A7%A3JPA%E6%B3%A8%E8%A7%A3%E5%92%8C%E5%B1%9E%E6%80%A7"><span class="toc-number">2.4.</span> <span class="toc-text">2.4了解JPA注解和属性</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89JPA%E7%9A%84%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.4.1.</span> <span class="toc-text">（1）JPA的常用注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB%E7%9A%84%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.4.2.</span> <span class="toc-text">（2）映射关系的注解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">2.4.3.</span> <span class="toc-text">（3）映射关系的属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E5%AE%9E%E4%BE%8B%EF%BC%9A%E7%94%A8JPA%E6%9E%84%E5%BB%BA%E5%AE%9E%E4%BD%93%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">2.5.</span> <span class="toc-text">2.5 实例：用JPA构建实体数据表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6%E8%AE%A4%E8%AF%86JPA%E7%9A%84%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.6.</span> <span class="toc-text">2.6认识JPA的接口</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89JPA-%E6%8E%A5%E5%8F%A3-JpaRepository"><span class="toc-number">2.6.1.</span> <span class="toc-text">（1）JPA 接口 JpaRepository</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%88%86%E9%A1%B5%E6%8E%92%E5%BA%8F%E6%8E%A5%E5%8F%A3-PagingAndSortingRepository"><span class="toc-number">2.6.2.</span> <span class="toc-text">（2）分页排序接口 PagingAndSortingRepository</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C%E6%8E%A5%E5%8F%A3-CrudRepository"><span class="toc-number">2.6.3.</span> <span class="toc-text">（3）数据操作接口 CrudRepository</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E5%88%86%E9%A1%B5%E6%8E%A5%E5%8F%A3-Pageable-%E5%92%8C-Page"><span class="toc-number">2.6.4.</span> <span class="toc-text">（4）分页接口 Pageable 和 Page</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E6%8E%92%E5%BA%8F%E7%B1%BBSort"><span class="toc-number">2.6.5.</span> <span class="toc-text">（5）排序类Sort</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-JPA%E7%9A%84%E6%9F%A5%E8%AF%A2%E6%96%B9%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">3.JPA的查询方式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1%E4%BD%BF%E7%94%A8%E7%BA%A6%E5%AE%9A%E6%96%B9%E6%B3%95%E5%90%8D"><span class="toc-number">3.1.</span> <span class="toc-text">3.1使用约定方法名</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2%E7%94%A8JPQL%E8%BF%9B%E8%A1%8C%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.2.</span> <span class="toc-text">3.2用JPQL进行查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E4%B8%8B%E9%9D%A2%E4%BB%A3%E7%A0%81%E8%A1%A8%E7%A4%BA%E6%A0%B9%E6%8D%AEname%E5%80%BC%E8%BF%9B%E8%A1%8C%E6%9F%A5%E6%89%BE"><span class="toc-number">3.2.1.</span> <span class="toc-text">（1）下面代码表示根据name值进行查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E4%B8%8B%E9%9D%A2%E4%BB%A3%E7%A0%81%E8%A1%A8%E7%A4%BA%E6%A0%B9%E6%8D%AEname%E5%80%BC%E9%80%AC%E8%A1%8C%E6%A8%A1%E7%B3%8A%E6%9F%A5%E6%89%BE"><span class="toc-number">3.2.2.</span> <span class="toc-text">（2）下面代码表示根据name值逬行模糊查找</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3%E7%94%A8%E5%8E%9F%E7%94%9FSQL%E8%BF%9B%E8%A1%8C%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.3.</span> <span class="toc-text">3.3用原生SQL进行查询</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%A0%B9%E6%8D%AEID%E6%9F%A5%E8%AF%A2%E7%94%A8%E6%88%B7"><span class="toc-number">3.3.1.</span> <span class="toc-text">（1）根据ID查询用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E6%9F%A5%E8%AF%A2%E6%89%80%E6%9C%89%E7%94%A8%E6%88%B7"><span class="toc-number">3.3.2.</span> <span class="toc-text">（2）查询所有用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E6%A0%B9%E6%8D%AEemail%E6%9F%A5%E8%AF%A2%E7%94%A8%E6%88%B7"><span class="toc-number">3.3.3.</span> <span class="toc-text">（3）根据email查询用户</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E6%A0%B9%E6%8D%AEname%E6%9F%A5%E8%AF%A2%E7%94%A8%E6%88%B7%EF%BC%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E5%88%86%E9%A1%B5%E5%AF%B9%E8%B1%A1Page"><span class="toc-number">3.3.4.</span> <span class="toc-text">（4）根据name查询用户，并返回分页对象Page</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E6%A0%B9%E6%8D%AE%E5%90%8D%E5%AD%97%E6%9D%A5%E4%BF%AE%E6%94%B9email%E7%9A%84%E5%80%BC"><span class="toc-number">3.3.5.</span> <span class="toc-text">（5）根据名字来修改email的值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-4-%E7%94%A8-Specifications-%E8%BF%9B%E8%A1%8C%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 用 Specifications 进行查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-5-%E7%94%A8-ExampleMatcher-%E8%BF%9B%E8%A1%8C%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.5.</span> <span class="toc-text">3.5 用 ExampleMatcher 进行查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-6-%E7%94%A8%E8%B0%93%E8%AF%ADQueryDSL%E8%BF%9B%E8%A1%8C%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.6.</span> <span class="toc-text">3.6 用谓语QueryDSL进行查询</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E7%94%A8JPA%E5%BC%80%E5%8F%91%E6%96%87%E7%AB%A0%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9D%97"><span class="toc-number">4.</span> <span class="toc-text">4.用JPA开发文章管理模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E5%AE%9E%E7%8E%B0%E6%96%87%E7%AB%A0%E5%AE%9E%E4%BD%93"><span class="toc-number">4.0.1.</span> <span class="toc-text">4.1实现文章实体</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%B1%82"><span class="toc-number">4.1.</span> <span class="toc-text">4.2 实现数据持久层</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-3-%E9%80%9A%E8%BF%87%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%8F%A3%E5%92%8C%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%AE%9E%E7%8E%B0%E7%B1%BB%E6%9D%A5%E5%AE%8C%E6%88%90%E4%B8%9A%E5%8A%A1%E9%80%BB%E8%BE%91%E5%8A%9F%E8%83%BD"><span class="toc-number">4.2.</span> <span class="toc-text">4.3 通过创建服务接口和服务接口的实现类来完成业务逻辑功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%8F%A3%EF%BC%8C%E8%A7%81%E4%BB%A5%E4%B8%8B%E4%BB%A3%E7%A0%81"><span class="toc-number">4.2.1.</span> <span class="toc-text">（1）创建服务接口，见以下代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%BC%96%E5%86%99%E6%9C%8D%E5%8A%A1%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.2.2.</span> <span class="toc-text">（2）编写服务接口的实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E5%AE%9E%E7%8E%B0%E5%A2%9E%E5%8A%A0%E3%80%81%E5%88%A0%E9%99%A4%E3%80%81%E4%BF%AE%E6%94%B9%E5%92%8C%E6%9F%A5%E8%AF%A2%E7%9A%84%E6%8E%A7%E5%88%B6%E5%B1%82API%E5%8A%9F%E8%83%BD"><span class="toc-number">4.2.3.</span> <span class="toc-text">（3）实现增加、删除、修改和查询的控制层API功能</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E5%AE%9E%E7%8E%B0%E8%87%AA%E5%8A%A8%E5%A1%AB%E5%85%85%E5%AD%97%E6%AE%B5"><span class="toc-number">5.</span> <span class="toc-text">5.实现自动填充字段</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%BC%80%E5%90%AFJPA%E7%9A%84%E5%AE%A1%E8%AE%A1%E5%8A%9F%E8%83%BD"><span class="toc-number">5.0.1.</span> <span class="toc-text">（1）开启JPA的审计功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%88%9B%E5%BB%BA%E5%9F%BA%E7%B1%BB"><span class="toc-number">5.0.2.</span> <span class="toc-text">（2）创建基类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E8%B5%8B%E5%80%BC%E7%BB%99-CreatedBy-%E5%92%8C-LastModifiedBy"><span class="toc-number">5.0.3.</span> <span class="toc-text">（3）赋值给 CreatedBy 和 LastModifiedBy</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E4%BD%BF%E7%94%A8%E5%9F%BA%E7%B1%BB"><span class="toc-number">5.0.4.</span> <span class="toc-text">（4）使用基类</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84%E5%BC%80%E5%8F%91"><span class="toc-number">6.</span> <span class="toc-text">6.关系映射开发</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1%E8%AE%A4%E8%AF%86%E5%AE%9E%E4%BD%93%E9%97%B4%E5%85%B3%E7%B3%BB%E6%98%A0%E5%B0%84"><span class="toc-number">6.1.</span> <span class="toc-text">6.1认识实体间关系映射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E6%98%A0%E5%B0%84%E6%96%B9%E5%90%91"><span class="toc-number">6.1.1.</span> <span class="toc-text">（1）映射方向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89ORM%E6%98%A0%E5%B0%84%E7%B1%BB%E5%9E%8B"><span class="toc-number">6.1.2.</span> <span class="toc-text">（2）ORM映射类型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E5%AE%9E%E7%8E%B0%E4%B8%80%E5%AF%B9%E4%B8%80%E6%98%A0%E5%B0%84"><span class="toc-number">6.2.</span> <span class="toc-text">实例：实现一对一映射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%BC%96%E5%86%99%E5%AE%9E%E4%BD%93"><span class="toc-number">6.2.1.</span> <span class="toc-text">（1）编写实体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%BC%96%E5%86%99-Repository-%E5%B1%82"><span class="toc-number">6.2.2.</span> <span class="toc-text">（2）编写 Repository 层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E7%BC%96%E5%86%99Service%E5%B1%82"><span class="toc-number">6.2.3.</span> <span class="toc-text">（3）编写Service层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E7%BC%96%E5%86%99Service%E5%AE%9E%E7%8E%B0"><span class="toc-number">6.2.4.</span> <span class="toc-text">（4）编写Service实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95"><span class="toc-number">6.2.5.</span> <span class="toc-text">（5）编写测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E5%AE%9E%E7%8E%B0%E4%B8%80%E5%AF%B9%E5%A4%9A%E6%98%A0%E5%B0%84"><span class="toc-number">6.3.</span> <span class="toc-text">实例：实现一对多映射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E7%BC%96%E5%86%99%E5%AE%9E%E4%BD%93-1"><span class="toc-number">6.3.1.</span> <span class="toc-text">（1）编写实体</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E7%BC%96%E5%86%99-Repository-%E5%B1%82-1"><span class="toc-number">6.3.2.</span> <span class="toc-text">（2）编写 Repository 层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%883%EF%BC%89%E7%BC%96%E5%86%99Service%E5%B1%82-1"><span class="toc-number">6.3.3.</span> <span class="toc-text">（3）编写Service层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%884%EF%BC%89%E7%BC%96%E5%86%99Service%E5%AE%9E%E7%8E%B0-1"><span class="toc-number">6.3.4.</span> <span class="toc-text">（4）编写Service实现</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%885%EF%BC%89%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95-1"><span class="toc-number">6.3.5.</span> <span class="toc-text">（5）编写测试</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E5%AE%9E%E7%8E%B0%E5%A4%9A%E5%AF%B9%E5%A4%9A%E6%98%A0%E5%B0%84"><span class="toc-number">6.4.</span> <span class="toc-text">实例：实现多对多映射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%881%EF%BC%89%E5%88%9B%E5%BB%BA%E5%AE%9E%E4%BD%93%E7%B1%BB"><span class="toc-number">6.4.1.</span> <span class="toc-text">（1）创建实体类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%EF%BC%882%EF%BC%89%E5%88%9B%E5%BB%BA%E6%B5%8B%E8%AF%95"><span class="toc-number">6.4.2.</span> <span class="toc-text">（2）创建测试</span></a></li></ol></li></ol></li></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/05/13/exe%E6%B3%A8%E5%86%8C%E4%B8%BAwindows%E6%9C%8D%E5%8A%A1/" title="exe注册为windows服务"><img src="https://image.buretuzi.online/blog/article/article-background/wallhaven-2yed86.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="exe注册为windows服务"></a><div class="content"><a class="title" href="/2025/05/13/exe%E6%B3%A8%E5%86%8C%E4%B8%BAwindows%E6%9C%8D%E5%8A%A1/" title="exe注册为windows服务">exe注册为windows服务</a><time datetime="2025-05-13T17:06:18.000Z" title="发表于 2025-05-13 17:06:18">2025-05-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/13/UE4_2_operation/" title="2.UE4物体移动"><img src="https://image.buretuzi.online/ue4/095223-6245095744c07.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="2.UE4物体移动"></a><div class="content"><a class="title" href="/2025/04/13/UE4_2_operation/" title="2.UE4物体移动">2.UE4物体移动</a><time datetime="2025-04-13T10:16:00.000Z" title="发表于 2025-04-13 10:16:00">2025-04-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/04/11/UE4_1_operation/" title="1.UE4基础操作"><img src="https://image.buretuzi.online/ue4/095223-6245095744c07.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="1.UE4基础操作"></a><div class="content"><a class="title" href="/2025/04/11/UE4_1_operation/" title="1.UE4基础操作">1.UE4基础操作</a><time datetime="2025-04-11T22:16:00.000Z" title="发表于 2025-04-11 22:16:00">2025-04-11</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/10/Linux%20%E6%90%AD%E5%BB%BAKMS/" title="Linux 搭建KMS"><img src="https://image.buretuzi.online/blog/article/article-background/wallhaven-x61vml.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Linux 搭建KMS"></a><div class="content"><a class="title" href="/2023/11/10/Linux%20%E6%90%AD%E5%BB%BAKMS/" title="Linux 搭建KMS">Linux 搭建KMS</a><time datetime="2023-11-10T10:43:12.000Z" title="发表于 2023-11-10 10:43:12">2023-11-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/11/10/Linux%20%E6%90%AD%E5%BB%BAOpenVPN/" title="Linux 搭建OpenVPN"><img src="https://image.buretuzi.online/blog/article/article-background/wallhaven-x61vml.jpg" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="Linux 搭建OpenVPN"></a><div class="content"><a class="title" href="/2023/11/10/Linux%20%E6%90%AD%E5%BB%BAOpenVPN/" title="Linux 搭建OpenVPN">Linux 搭建OpenVPN</a><time datetime="2023-11-10T10:43:12.000Z" title="发表于 2023-11-10 10:43:12">2023-11-10</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer_deal"><a class="deal_link" href="" title="mail"><i class="iconfont icon-17"></i></a><a class="deal_link" href="" title="qq" target="_blank"><i class="iconfont icon-qq"></i></a><a class="deal_link" href="" title="CSDN" target="_blank"><i class="iconfont icon-csdn"></i></a><a class="deal_link" href="https://github.com/luaby" title="github" target="_blank"><i class="iconfont icon-github"></i></a><img class="footer_mini_logo entered loading" style="border-radius:50%" src="/img/彩虹.png" onclick="btf.scrollToDest(0,500)" title="返回顶部"><a class="deal_link" href="" title="QQ空间"><i class="iconfont icon-qzone"></i></a><a class="deal_link" href="" title="微信" target="_blank"><i class="iconfont icon-wechat"></i></a><a class="deal_link" href="" title="Twitter" target="_blank"><i class="iconfont icon-twitter"></i></a><a class="deal_link" href="" title="Telegram" target="_blank"><i class="iconfont icon-fasong"></i></a></div><div id="Jay-footer"><div class="footer-group"><h3 class="footer-title">直达</h3><div class="footer-links"><a class="footer-item" href="" target="_blank">我的主页</a><a class="footer-item" href="">音乐欣赏</a><a class="footer-item" href="">心灵港湾</a><a class="footer-item" href="">随机文章</a></div></div><div class="footer-group"><h3 class="footer-title">分类</h3><div class="footer-links"><a class="footer-item" href="">学习笔记</a><a class="footer-item" href="">魔改教程</a><a class="footer-item" href="">算法笔记</a><a class="footer-item" href="">语法教程</a></div></div><div class="footer-group"><h3 class="footer-title">关于</h3><div class="footer-links"><a class="footer-item" href="/about/">关于我</a><a class="footer-item" href="">博客统计</a><a class="footer-item" href="/archives/">文章归档</a><a class="footer-item" href="">更新记录</a></div></div><div class="footer-group"><h3 class="footer-title">友链</h3><div class="footer-links" id="friend-links-in-footer"><a class="footer-item" target="_blank" rel="noopener" href="https://anzhiy.cn/">安知鱼</a><a class="footer-item" target="_blank" rel="noopener" href="https://www.chuckle.top">轻笑Chuckle</a><a class="footer-item" target="_blank" rel="noopener" href="https://akilar.top/">Akilarの糖果屋</a><a class="footer-item" target="_blank" rel="noopener" href="https://yisous.xyz">Ariasaka</a></div></div><div class="footer-group"><h3 class="footer-title">协议</h3><div class="footer-links"><a class="footer-item" href="">隐私协议</a><a class="footer-item" href="">Cookie</a><a class="footer-item" href="">版权协议</a></div></div></div><!--#footer-banner--><!--        #footer-banner-tips--><div id="footer-wrap"></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="聊天"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="nav-music"><div id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()">播放音乐</div><meting-js id="8703296584" server="tencent" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random"></meting-js></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i> <span>数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div><hr><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><a class="rightMenu-item" href="javascript:window.history.back();"><i class="fa fa-arrow-left"></i></a><a class="rightMenu-item" href="javascript:window.history.forward();"><i class="fa fa-arrow-right"></i></a><a class="rightMenu-item" href="javascript:window.location.reload();"><i class="fa fa-refresh"></i></a><a class="rightMenu-item" href="javascript:rmf.scrollToTop();"><i class="fa fa-arrow-up"></i></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-text"><a class="rightMenu-item" href="javascript:rmf.copySelect();"><i class="fa fa-copy"></i><span>复制</span></a><a class="rightMenu-item" href="javascript:window.open(&quot;https://www.baidu.com/s?wd=&quot;+window.getSelection().toString());window.location.reload();"><i class="iconfont icon-baidu"></i><span>百度搜索</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-too"><a class="rightMenu-item" href="javascript:window.open(window.getSelection().toString());window.location.reload();"><i class="fa fa-link"></i><span>转到链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-paste"><a class="rightMenu-item" href="javascript:rmf.paste()"><i class="fa fa-copy"></i><span>粘贴</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-post"><a class="rightMenu-item" href="#post-comment"><i class="fas fa-comment"></i><span>空降评论</span></a><a class="rightMenu-item" href="javascript:rmf.copyWordsLink()"><i class="fa fa-link"></i><span>复制本文地址</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-to"><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>新窗口打开</span></a><a class="rightMenu-item" id="menu-too" href="javascript:rmf.open()"><i class="fa fa-link"></i><span>转到链接</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制链接</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-music"><a class="rightMenu-item" id="menu-music-play" href="javascript:anzhiyu.musicToggle()"><i class="fas fa-play"></i><span>播放音乐</span></a><a class="rightMenu-item" id="menu-music-pause" href="javascript:anzhiyu.musicToggle()"><i class="fa-solid fa-pause"></i><span>暂停音乐</span></a><a class="rightMenu-item" href="javascript:anzhiyu.musicSkipBack()"><i class="fas fa-backward"></i><span>切换到上一首</span></a><a class="rightMenu-item" href="javascript:anzhiyu.musicSkipForward()"><i class="fas fa-forward"></i><span>切换到下一首</span></a><a class="rightMenu-item" target="_blank" rel="noopener" href="https://y.qq.com/n/ryqq/playlist/8703296584"><i class="fas fa-radio"></i><span>查看歌单</span></a><a class="rightMenu-item" href="javascript:anzhiyu.musicGetSingName()"><i class="fas fa-copy"></i><span>复制歌名</span></a></div><div class="rightMenu-group rightMenu-line hide" id="menu-img"><a class="rightMenu-item" href="./#post-comment"><i class="fa fa-download"></i><span>保存图片</span></a><a class="rightMenu-item" href="javascript:rmf.openWithNewTab()"><i class="fa fa-window-restore"></i><span>在新窗口打开</span></a><a class="rightMenu-item" href="javascript:rmf.click()"><i class="fa fa-arrows-alt"></i><span>全屏显示</span></a><a class="rightMenu-item" href="javascript:rmf.copyLink()"><i class="fa fa-copy"></i><span>复制图片链接</span></a></div><div class="rightMenu-group rightMenu-line" id="common"><a class="rightMenu-item" href="javascript:toRandomPost()"><i class="fa fa-paper-plane"></i><span>随便逛逛</span></a><a class="rightMenu-item" href="javascript:rmf.switchDarkMode();"><i class="fa fa-moon"></i><span>昼夜切换</span></a><a class="rightMenu-item" href="javascript:rmf.translate();"><i class="iconfont icon-fanti"></i><span>繁简转换</span></a><a class="rightMenu-item" href="javascript:rmf.switchReadMode();"><i class="fa fa-book"></i><span>阅读模式</span></a><a class="rightMenu-item" href="javascript:window.location.href=&quot;/about/&quot;;"><i class="fa fa-info-circle"></i><span>版权声明</span></a></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/pluginsSrc/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/pluginsSrc/instant.page/instantpage.js" type="module"></script><script src="/pluginsSrc/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/pluginsSrc/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{const o=()=>{twikoo.init(Object.assign({el:"#twikoo-wrap",envId:"https://twikoo.buretuzi.online/",region:"",onCommentLoaded:function(){btf.loadLightbox(document.querySelectorAll("#twikoo .tk-content img:not(.tk-owo-emotion)"))}},null))},t=()=>{"object"!=typeof twikoo?getScript("/pluginsSrc/twikoo/dist/twikoo.all.min.js").then(o):setTimeout(o,0)};t()})()</script><script>function loadValine(){function n(){new Valine(Object.assign({el:"#vcomment",appId:"0onZJ2E9cHeXWot3kJWDdrfM-gzGzoHsz",appKey:"ghd4PqqDJfdNbcH3JZEGwl4A",avatar:"mp",serverURLs:"",emojiMaps:"",path:window.location.pathname,visitor:!0}))}"function"==typeof Valine?n():getScript("/pluginsSrc/valine/dist/Valine.min.js").then(n)}{function loadOtherComment(){loadValine()}setTimeout(loadValine,0)}</script></div><div class="aplayer no-destroy" data-id="1708664797" data-server="tencent" data-type="playlist" data-order="list" data-fixed="true" data-preload="auto" data-autoplay="false" data-mutex="true"></div><script src="/js/cursor.js"></script><script src="/js/sakura.js"></script><script src="/js/Progressbar.js"></script><script async data-pjax src="/js/navigation.js"></script><script src="/js/jquery.min.js"></script><script src="/js/rightmenu.js"></script><script src="/js/title.js"></script><script src="/js/player/anzhiyu.js"></script><script src="/js/player/anzhiyufunction.js"></script><script src="/js/winbox.bundle.min.js"></script><canvas class="fireworks" mobile="true"></canvas><script src="/pluginsSrc/butterfly-extsrc/dist/fireworks.min.js"></script><script defer id="fluttering_ribbon" mobile="true" src="/pluginsSrc/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><script src="/pluginsSrc/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!0,document.body.addEventListener("input",POWERMODE)</script><link rel="stylesheet" href="/css/player/APlayer.min.css" media="print" onload='this.media="all"'><script src="/js/player/APlayer.min.js"></script><script src="/js/player/Meting2.min.js"></script><script src="/pluginsSrc/pjax/pjax.min.js"></script><script>let pjaxSelectors=["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"];var pjax=new Pjax({elements:'a:not([target="_blank"])',selectors:pjaxSelectors,cacheBust:!1,analytics:!1,scrollRestoration:!1});document.addEventListener("pjax:send",(function(){if(window.tocScrollFn&&window.removeEventListener("scroll",window.tocScrollFn),window.scrollCollect&&window.removeEventListener("scroll",scrollCollect),document.getElementById("rightside").style.cssText="opacity: ''; transform: ''",window.aplayers)for(let e=0;e<window.aplayers.length;e++)window.aplayers[e].options.fixed||window.aplayers[e].destroy();"object"==typeof typed&&typed.destroy();const e=document.body.classList;e.contains("read-mode")&&e.remove("read-mode"),"object"==typeof disqusjs&&disqusjs.destroy()})),document.addEventListener("pjax:complete",(function(){window.refreshFn(),document.querySelectorAll("script[data-pjax]").forEach((e=>{const t=document.createElement("script"),o=e.text||e.textContent||e.innerHTML||"";Array.from(e.attributes).forEach((e=>t.setAttribute(e.name,e.value))),t.appendChild(document.createTextNode(o)),e.parentNode.replaceChild(t,e)})),GLOBAL_CONFIG.islazyload&&window.lazyLoadInstance.update(),"function"==typeof chatBtnFn&&chatBtnFn(),"function"==typeof panguInit&&panguInit(),"function"==typeof gtag&&gtag("config","",{page_path:window.location.pathname}),"object"==typeof _hmt&&_hmt.push(["_trackPageview",window.location.pathname]),"function"==typeof loadMeting&&document.getElementsByClassName("aplayer").length&&loadMeting(),"object"==typeof Prism&&Prism.highlightAll()})),document.addEventListener("pjax:error",(e=>{404===e.request.status&&pjax.loadUrl("/404.html")}))</script></div><div class="contact-info"><div class="option"><i class="fas fa-heart"></i><div class="bloktop"></div><div class="text">或许不该心动<div class="strip"></div></div></div><div class="option"><i class="fas fa-commenting"></i><div class="blok"></div><div class="text">要和我说悄悄话吗？<div class="strip"></div></div></div><div class="option"><i class="fas fa-hourglass-2"></i><div class="blokbottom"></div><div class="text">人生匆匆，何必拘泥过往<div class="strip"></div></div></div></div><script data-pjax>function butterfly_categories_card_injector_config(){var a=document.getElementById("recent-posts");console.log("已挂载butterfly_categories_card"),a.insertAdjacentHTML("afterbegin",'<style>li.categoryBar-list-item{width:24%;}.categoryBar-list{max-height: 190px;overflow:auto;}.categoryBar-list::-webkit-scrollbar{width:0!important}@media screen and (max-width: 650px){.categoryBar-list{max-height: 160px;}}</style><div class="recent-post-item" style="height:auto;width:100%;padding:0px;"><div id="categoryBar"><ul class="categoryBar-list"><li class="categoryBar-list-item" style="background:url(/img/1.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/java/&quot;);" href="javascript:void(0);">java</a><span class="categoryBar-list-count">41</span><span class="categoryBar-list-descr">技术</span></li><li class="categoryBar-list-item" style="background:url(/img/2.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/windows/&quot;);" href="javascript:void(0);">windows</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(/img/3.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/Linux/&quot;);" href="javascript:void(0);">Linux</a><span class="categoryBar-list-count">3</span><span class="categoryBar-list-descr"></span></li><li class="categoryBar-list-item" style="background:url(/img/4.webp);"> <a class="categoryBar-list-link" onclick="pjax.loadUrl(&quot;categories/UE4/&quot;);" href="javascript:void(0);">UE4</a><span class="categoryBar-list-count">2</span><span class="categoryBar-list-descr"></span></li></ul></div></div>')}document.getElementById("recent-posts")&&"/"===location.pathname&&butterfly_categories_card_injector_config()</script><script data-pjax>function butterfly_clock_anzhiyu_injector_config(){var e=document.getElementById("card-widget");console.log("已挂载butterfly_clock_anzhiyu"),e&&e.insertAdjacentHTML("afterbegin",'<div class="card-widget card-clock"><div class="card-glass"><div class="card-background"><div class="card-content"><div id="hexo_electric_clock"><img class="entered loading" id="card-clock-loading" src="/img/clock.gif" style="height: 120px; width: 100%;" data-ll-status="loading"/></div></div></div></div></div>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",qweather_key="077e8d0195484e3a81fdbc5082aab008",gaud_map_key="af81a9f393f79a52e1deb75a2109d705",baidu_ak_key="undefined",flag=0,clock_rectangle="112.982279,28.19409",clock_default_rectangle_enable="false",i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_clock_anzhiyu_injector_config()</script><script src="https://widget.qweather.net/simple/static/js/he-simple-common.js?v=2.0"></script><script data-pjax src="/js/clock.min.js"></script><script data-pjax>function butterfly_footer_beautify_injector_config(){var t=document.getElementById("footer-wrap");console.log("已挂载butterfly_footer_beautify"),t.insertAdjacentHTML("beforeend",'<p id="ghbdages"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" data-title="博客框架为Hexo_v5.4.0" title=""><img src="/img/footer/frame.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" data-title="主题版本Butterfly_v4.2.2" title=""><img src="/img/footer/theme.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://vercel.com" style="margin-inline:5px" data-title="本站使用Vercel作为静态托管平台" title=""><img src="/img/footer/host.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://icp.gov.moe/?keyword=20229936" style="margin-inline:5px" data-title="本站已在萌进行备案" title=""><img src="/img/footer/萌备案.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://beian.miit.gov.cn" style="margin-inline:5px" data-title="本站已在豫进行备案" title=""><img src="/img/footer/豫备案.svg" alt=""/></a><a class="github-badge" target="_blank" href="https://www.upyun.com/" style="margin-inline:5px" data-title="本站使用又拍云为静态资源提供CDN加速" title=""><img src="/img/footer/cdn.svg" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" data-title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可" title=""><img src="/img/footer/copyright.svg" alt=""/></a></p>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_footer_beautify_injector_config()</script><script data-pjax>function butterfly_swiper_injector_config(){var i=document.getElementById("recent-posts");console.log("已挂载butterfly_swiper"),i.insertAdjacentHTML("afterbegin",'<div class="recent-post-item" style="height: auto;width: 100%"><div class="blog-slider swiper-container-fade swiper-container-horizontal" id="swiper_container"><div class="blog-slider__wrp swiper-wrapper" style="transition-duration: 0ms;"><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/07/17/异常处理- SpringBoot（11）/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="https://image.buretuzi.online/blog/article/article-background/wallhaven-3zj6l9.jpg" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-07-17</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/07/17/异常处理- SpringBoot（11）/&quot;);" href="javascript:void(0);" alt="">异常处理- SpringBoot（11）</a><div class="blog-slider__text">你会爱我吗？</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/07/17/异常处理- SpringBoot（11）/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div><div class="blog-slider__item swiper-slide" style="width: 750px; opacity: 1; transform: translate3d(0px, 0px, 0px); transition-duration: 0ms;"><a class="blog-slider__img" onclick="pjax.loadUrl(&quot;2022/08/18/java垃圾收集器与内存分配策略(2)/&quot;);" href="javascript:void(0);" alt=""><img width="48" height="48" src="/img/1.webp" alt="" onerror="this.src=https://unpkg.zhimg.com/akilar-candyassets/image/loading.gif; this.onerror = null;"/></a><div class="blog-slider__content"><span class="blog-slider__code">2022-08-18</span><a class="blog-slider__title" onclick="pjax.loadUrl(&quot;2022/08/18/java垃圾收集器与内存分配策略(2)/&quot;);" href="javascript:void(0);" alt="">java垃圾收集器与内存分配策略(2)</a><div class="blog-slider__text">好吧就这样吧</div><a class="blog-slider__button" onclick="pjax.loadUrl(&quot;2022/08/18/java垃圾收集器与内存分配策略(2)/&quot;);" href="javascript:void(0);" alt="">详情       </a></div></div></div><div class="blog-slider__pagination swiper-pagination-clickable swiper-pagination-bullets"></div></div></div>')}for(var elist="undefined".split(","),cpage=location.pathname,epage="/",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_swiper_injector_config()</script><script defer src="/js/swiper/swiper.min.js"></script><script defer data-pjax src="/js/swiper/swiper_init.js"></script></body></html>